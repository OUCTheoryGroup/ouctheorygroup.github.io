import{a$ as N,ah as C,l as he,b1 as be,aO as ve,z as ge,k as se,A as ye,m as Ne,r as R,aV as j,C as w,aY as O,U as ie,o as Ve,bf as xe,c as V,d as v,a8 as ee,D as $,b as J,f as i,al as K,E as q,p as U,w as Y,e as X,b4 as Ie,br as Me,J as te,bs as Se,aE as _e,ab as Ee,am as Q,az as le,R as we,b0 as Ce,af as $e,_ as ke,bt as Fe,a as b,K as ne,F as g}from"./index-2u-y5e30.js";import{U as S,I as B,C as re,g as Pe,d as Ae,a as De,v as ae,k as ze,l as Oe}from"./el-button-Dh5BWkaP.js";const Ke=he({id:{type:String,default:void 0},step:{type:Number,default:1},stepStrictly:Boolean,max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},modelValue:Number,readonly:Boolean,disabled:Boolean,size:ve,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:"",values:["","right"]},valueOnClear:{type:[String,Number,null],validator:u=>u===null||N(u)||["min","max"].includes(u),default:null},name:String,placeholder:String,precision:{type:Number,validator:u=>u>=0&&u===Number.parseInt(`${u}`,10)},validateEvent:{type:Boolean,default:!0},...be(["ariaLabel"])}),Ue={[re]:(u,_)=>_!==u,blur:u=>u instanceof FocusEvent,focus:u=>u instanceof FocusEvent,[B]:u=>N(u)||C(u),[S]:u=>N(u)||C(u)},Ye=se({name:"ElInputNumber"}),Xe=se({...Ye,props:Ke,emits:Ue,setup(u,{expose:_,emit:f}){const a=u,{t:x}=ye(),m=Ne("input-number"),p=R(),l=j({currentValue:a.modelValue,userInput:null}),{formItem:t}=Pe(),k=w(()=>N(a.modelValue)&&a.modelValue<=a.min),F=w(()=>N(a.modelValue)&&a.modelValue>=a.max),P=w(()=>{const e=Z(a.step);return O(a.precision)?Math.max(Z(a.modelValue),e):(e>a.precision,a.precision)}),E=w(()=>a.controls&&a.controlsPosition==="right"),o=Ae(),r=De(),I=w(()=>{if(l.userInput!==null)return l.userInput;let e=l.currentValue;if(C(e))return"";if(N(e)){if(Number.isNaN(e))return"";O(a.precision)||(e=e.toFixed(a.precision))}return e}),M=(e,n)=>{if(O(n)&&(n=P.value),n===0)return Math.round(e);let s=String(e);const c=s.indexOf(".");if(c===-1||!s.replace(".","").split("")[c+n])return e;const D=s.length;return s.charAt(D-1)==="5"&&(s=`${s.slice(0,Math.max(0,D-1))}6`),Number.parseFloat(Number(s).toFixed(n))},Z=e=>{if(C(e))return 0;const n=e.toString(),s=n.indexOf(".");let c=0;return s!==-1&&(c=n.length-s-1),c},L=(e,n=1)=>N(e)?M(e+a.step*n):l.currentValue,G=()=>{if(a.readonly||r.value||F.value)return;const e=Number(I.value)||0,n=L(e);A(n),f(B,l.currentValue),H()},W=()=>{if(a.readonly||r.value||k.value)return;const e=Number(I.value)||0,n=L(e,-1);A(n),f(B,l.currentValue),H()},T=(e,n)=>{const{max:s,min:c,step:d,precision:y,stepStrictly:D,valueOnClear:z}=a;s<c&&we("InputNumber","min should not be greater than max.");let h=Number(e);if(C(e)||Number.isNaN(h))return null;if(e===""){if(z===null)return null;h=Ce(z)?{min:c,max:s}[z]:z}return D&&(h=M(Math.round(h/d)*d,y),h!==e&&n&&f(S,h)),O(y)||(h=M(h,y)),(h>s||h<c)&&(h=h>s?s:c,n&&f(S,h)),h},A=(e,n=!0)=>{var s;const c=l.currentValue,d=T(e);if(!n){f(S,d);return}c===d&&e||(l.userInput=null,f(S,d),c!==d&&f(re,d,c),a.validateEvent&&((s=t==null?void 0:t.validate)==null||s.call(t,"change").catch(y=>le())),l.currentValue=d)},ue=e=>{l.userInput=e;const n=e===""?null:Number(e);f(B,n),A(n,!1)},oe=e=>{const n=e!==""?Number(e):"";(N(n)&&!Number.isNaN(n)||e==="")&&A(n),H(),l.userInput=null},ce=()=>{var e,n;(n=(e=p.value)==null?void 0:e.focus)==null||n.call(e)},de=()=>{var e,n;(n=(e=p.value)==null?void 0:e.blur)==null||n.call(e)},pe=e=>{f("focus",e)},fe=e=>{var n,s;l.userInput=null,Oe()&&l.currentValue===null&&((n=p.value)!=null&&n.input)&&(p.value.input.value=""),f("blur",e),a.validateEvent&&((s=t==null?void 0:t.validate)==null||s.call(t,"blur").catch(c=>le()))},H=()=>{l.currentValue!==a.modelValue&&(l.currentValue=a.modelValue)},me=e=>{document.activeElement===e.target&&e.preventDefault()};return ie(()=>a.modelValue,(e,n)=>{const s=T(e,!0);l.userInput===null&&s!==n&&(l.currentValue=s)},{immediate:!0}),Ve(()=>{var e;const{min:n,max:s,modelValue:c}=a,d=(e=p.value)==null?void 0:e.input;if(d.setAttribute("role","spinbutton"),Number.isFinite(s)?d.setAttribute("aria-valuemax",String(s)):d.removeAttribute("aria-valuemax"),Number.isFinite(n)?d.setAttribute("aria-valuemin",String(n)):d.removeAttribute("aria-valuemin"),d.setAttribute("aria-valuenow",l.currentValue||l.currentValue===0?String(l.currentValue):""),d.setAttribute("aria-disabled",String(r.value)),!N(c)&&c!=null){let y=Number(c);Number.isNaN(y)&&(y=null),f(S,y)}d.addEventListener("wheel",me,{passive:!1})}),xe(()=>{var e,n;const s=(e=p.value)==null?void 0:e.input;s==null||s.setAttribute("aria-valuenow",`${(n=l.currentValue)!=null?n:""}`)}),_({focus:ce,blur:de}),(e,n)=>(v(),V("div",{class:q([i(m).b(),i(m).m(i(o)),i(m).is("disabled",i(r)),i(m).is("without-controls",!e.controls),i(m).is("controls-right",i(E))]),onDragstart:Q(()=>{},["prevent"])},[e.controls?ee((v(),V("span",{key:0,role:"button","aria-label":i(x)("el.inputNumber.decrease"),class:q([i(m).e("decrease"),i(m).is("disabled",i(k))]),onKeydown:K(W,["enter"])},[U(e.$slots,"decrease-icon",{},()=>[J(i(te),null,{default:Y(()=>[i(E)?(v(),X(i(Ie),{key:0})):(v(),X(i(Me),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[i(ae),W]]):$("v-if",!0),e.controls?ee((v(),V("span",{key:1,role:"button","aria-label":i(x)("el.inputNumber.increase"),class:q([i(m).e("increase"),i(m).is("disabled",i(F))]),onKeydown:K(G,["enter"])},[U(e.$slots,"increase-icon",{},()=>[J(i(te),null,{default:Y(()=>[i(E)?(v(),X(i(Se),{key:0})):(v(),X(i(_e),{key:1}))]),_:1})])],42,["aria-label","onKeydown"])),[[i(ae),G]]):$("v-if",!0),J(i(ze),{id:e.id,ref_key:"input",ref:p,type:"number",step:e.step,"model-value":i(I),placeholder:e.placeholder,readonly:e.readonly,disabled:i(r),size:i(o),max:e.max,min:e.min,name:e.name,"aria-label":e.ariaLabel,"validate-event":!1,onKeydown:[K(Q(G,["prevent"]),["up"]),K(Q(W,["prevent"]),["down"])],onBlur:fe,onFocus:pe,onInput:ue,onChange:oe},Ee({_:2},[e.$slots.prefix?{name:"prefix",fn:Y(()=>[U(e.$slots,"prefix")])}:void 0,e.$slots.suffix?{name:"suffix",fn:Y(()=>[U(e.$slots,"suffix")])}:void 0]),1032,["id","step","model-value","placeholder","readonly","disabled","size","max","min","name","aria-label","onKeydown"])],42,["onDragstart"]))}});var je=ge(Xe,[["__file","input-number.vue"]]);const Re=$e(je),Be="/seaice/picture/land_image.webp",Ge={class:"image-selector"},We={key:0,class:"selection-info-container"},He={class:"selection-info"},Je={__name:"ImageSelector",props:{topLeft:{type:Object,default:()=>({x:null,y:null})},bottomRight:{type:Object,default:()=>({x:null,y:null})},width:{type:Number,default:432},height:{type:Number,default:432}},emits:["update:topLeft","update:bottomRight"],setup(u,{emit:_}){Fe(o=>({e6acfcea:u.width+"px","530f0c82":u.height+"px"}));const f=u,a=_,x=R(null),m=R(!1),p=j({x:0,y:0}),l=j({left:0,top:0,width:0,height:0}),t=j({left:0,top:0,width:0,height:0,isVisible:!1}),k=o=>{o.preventDefault(),m.value=!0;const r=x.value.getBoundingClientRect();p.x=o.clientX-r.left,p.y=o.clientY-r.top,l.left=p.x,l.top=p.y,l.width=0,l.height=0},F=o=>{if(!m.value)return;const r=x.value.getBoundingClientRect(),I=Math.min(Math.max(o.clientX-r.left,0),r.width),M=Math.min(Math.max(o.clientY-r.top,0),r.height);l.left=Math.min(I,p.x),l.top=Math.min(M,p.y),l.width=Math.abs(I-p.x),l.height=Math.abs(M-p.y)},P=()=>{m.value=!1,l.width>0&&l.height>0&&(t.left=l.left,t.top=l.top,t.width=l.width,t.height=l.height,t.isVisible=!0,a("update:topLeft",{x:Math.round(t.left),y:Math.round(t.top)}),a("update:bottomRight",{x:Math.round(t.left+t.width),y:Math.round(t.top+t.height)}))};ie(()=>[f.topLeft,f.bottomRight],([o,r])=>{(o==null?void 0:o.x)!==null&&(o==null?void 0:o.y)!==null&&(r==null?void 0:r.x)!==null&&(r==null?void 0:r.y)!==null?(t.left=o.x,t.top=o.y,t.width=r.x-o.x,t.height=r.y-o.y,t.isVisible=!0):t.isVisible=!1},{immediate:!0});const E=()=>{t.left=0,t.top=0,t.width=0,t.height=0,t.isVisible=!1,l.left=0,l.top=0,l.width=0,l.height=0,a("update:topLeft",{x:null,y:null}),a("update:bottomRight",{x:null,y:null})};return(o,r)=>(v(),V("div",Ge,[b("div",{class:"image-container",ref_key:"imageContainer",ref:x,onMousedown:k,onMousemove:F,onMouseup:P,onMouseleave:P},[r[0]||(r[0]=b("img",{src:Be,alt:"Selectable Image",draggable:"false"},null,-1)),m.value?(v(),V("div",{key:0,class:"selection",style:ne({left:`${l.left}px`,top:`${l.top}px`,width:`${l.width}px`,height:`${l.height}px`})},null,4)):$("",!0),t.isVisible?(v(),V("div",{key:1,class:"last-selection",style:ne({left:`${t.left}px`,top:`${t.top}px`,width:`${t.width}px`,height:`${t.height}px`})},null,4)):$("",!0)],544),t.isVisible?(v(),V("div",We,[b("div",He,[r[1]||(r[1]=b("p",null,"最后选择区域尺寸:",-1)),b("p",null,"宽度: "+g(Math.round(t.width))+"px",1),b("p",null,"高度: "+g(Math.round(t.height))+"px",1),r[2]||(r[2]=b("p",null,"角坐标:",-1)),b("p",null,"左上: ("+g(Math.round(t.left))+", "+g(Math.round(t.top))+")",1),b("p",null," 右上: ("+g(Math.round(t.left+t.width))+", "+g(Math.round(t.top))+") ",1),b("p",null," 左下: ("+g(Math.round(t.left))+", "+g(Math.round(t.top+t.height))+") ",1),b("p",null," 右下: ("+g(Math.round(t.left+t.width))+", "+g(Math.round(t.top+t.height))+") ",1)]),b("button",{class:"clear-button",onClick:E},"清除选择")])):$("",!0)]))}},Ze=ke(Je,[["__scopeId","data-v-29187667"]]);export{Re as E,Ze as I};
