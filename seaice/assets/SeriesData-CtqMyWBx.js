import{B as G,w as v,V as Y,D as z,E as d,F as b,G as W,H as q,I as K,J,K as Q,L as Z,N as j,O as V,Q as B,R as k,T as tt,U as A,v as N,W as O,X as et,M as it,Y as nt,y as M,Z as rt,_ as ot,$ as st}from"./UncertaintyAnalysisView-DFnBaeEm.js";function y(n){return n==null?0:n.length||1}function H(n){return n}var at=function(){function n(t,e,i,r,o,s){this._old=t,this._new=e,this._oldKeyGetter=i||H,this._newKeyGetter=r||H,this.context=o,this._diffModeMultiple=s==="multiple"}return n.prototype.add=function(t){return this._add=t,this},n.prototype.update=function(t){return this._update=t,this},n.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},n.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},n.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},n.prototype.remove=function(t){return this._remove=t,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var t=this._old,e=this._new,i={},r=new Array(t.length),o=new Array(e.length);this._initIndexMap(t,null,r,"_oldKeyGetter"),this._initIndexMap(e,i,o,"_newKeyGetter");for(var s=0;s<t.length;s++){var u=r[s],a=i[u],f=y(a);if(f>1){var h=a.shift();a.length===1&&(i[u]=a[0]),this._update&&this._update(h,s)}else f===1?(i[u]=null,this._update&&this._update(a,s)):this._remove&&this._remove(s)}this._performRestAdd(o,i)},n.prototype._executeMultiple=function(){var t=this._old,e=this._new,i={},r={},o=[],s=[];this._initIndexMap(t,i,o,"_oldKeyGetter"),this._initIndexMap(e,r,s,"_newKeyGetter");for(var u=0;u<o.length;u++){var a=o[u],f=i[a],h=r[a],p=y(f),l=y(h);if(p>1&&l===1)this._updateManyToOne&&this._updateManyToOne(h,f),r[a]=null;else if(p===1&&l>1)this._updateOneToMany&&this._updateOneToMany(h,f),r[a]=null;else if(p===1&&l===1)this._update&&this._update(h,f),r[a]=null;else if(p>1&&l>1)this._updateManyToMany&&this._updateManyToMany(h,f),r[a]=null;else if(p>1)for(var m=0;m<p;m++)this._remove&&this._remove(f[m]);else this._remove&&this._remove(f)}this._performRestAdd(s,r)},n.prototype._performRestAdd=function(t,e){for(var i=0;i<t.length;i++){var r=t[i],o=e[r],s=y(o);if(s>1)for(var u=0;u<s;u++)this._add&&this._add(o[u]);else s===1&&this._add&&this._add(o);e[r]=null}},n.prototype._initIndexMap=function(t,e,i,r){for(var o=this._diffModeMultiple,s=0;s<t.length;s++){var u="_ec_"+this[r](t[s],s);if(o||(i[s]=u),!!e){var a=e[u],f=y(a);f===0?(e[u]=s,o&&i.push(u)):f===1?e[u]=[a,s]:a.push(s)}}},n}(),ut=function(){function n(t,e){this._encode=t,this._schema=e}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function ht(n,t){var e={},i=e.encode={},r=G(),o=[],s=[],u={};v(n.dimensions,function(l){var m=n.getDimensionInfo(l),_=m.coordDim;if(_){var S=m.coordDimIndex;R(i,_)[S]=l,m.isExtraCoord||(r.set(_,1),ft(m.type)&&(o[0]=l),R(u,_)[S]=n.getDimensionIndex(m.name)),m.defaultTooltip&&s.push(l)}Y.each(function(w,P){var X=R(i,P),C=m.otherDims[P];C!=null&&C!==!1&&(X[C]=m.name)})});var a=[],f={};r.each(function(l,m){var _=i[m];f[m]=_[0],a=a.concat(_)}),e.dataDimsOnCoord=a,e.dataDimIndicesOnCoord=z(a,function(l){return n.getDimensionInfo(l).storeDimIndex}),e.encodeFirstDimNotExtra=f;var h=i.label;h&&h.length&&(o=h.slice());var p=i.tooltip;return p&&p.length?s=p.slice():s.length||(s=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=s,e.userOutput=new ut(u,t),e}function R(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function ft(n){return!(n==="ordinal"||n==="time")}var T=function(){function n(t){this.otherDims={},t!=null&&d(this,t)}return n}(),lt=q(),pt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},mt=function(){function n(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=dt(this.source)))},n.prototype.getSourceDimensionIndex=function(t){return b(this._dimNameMap.get(t),-1)},n.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},n.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=W(this.source),i=!vt(t),r="",o=[],s=0,u=0;s<t;s++){var a=void 0,f=void 0,h=void 0,p=this.dimensions[u];if(p&&p.storeDimIndex===s)a=e?p.name:null,f=p.type,h=p.ordinalMeta,u++;else{var l=this.getSourceDimension(s);l&&(a=e?l.name:null,f=l.type)}o.push({property:a,type:f,ordinalMeta:h}),e&&a!=null&&(!p||!p.isCalculationCoord)&&(r+=i?a.replace(/\`/g,"`1").replace(/\$/g,"`2"):a),r+="$",r+=pt[f]||"f",h&&(r+=h.uid),r+="$"}var m=this.source,_=[m.seriesLayoutBy,m.startIndex,r].join("$$");return{dimensions:o,hash:_}},n.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,i=0;e<this._fullDimCount;e++){var r=void 0,o=this.dimensions[i];if(o&&o.storeDimIndex===e)o.isCalculationCoord||(r=o.name),i++;else{var s=this.getSourceDimension(e);s&&(r=s.name)}t.push(r)}return t},n.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function _t(n){return n instanceof mt}function ct(n){for(var t=G(),e=0;e<(n||[]).length;e++){var i=n[e],r=K(i)?i.name:i;r!=null&&t.get(r)==null&&t.set(r,e)}return t}function dt(n){var t=lt(n);return t.dimNameMap||(t.dimNameMap=ct(n.dimensionsDefine))}function vt(n){return n>30}var g=K,c=z,yt=typeof Int32Array>"u"?Array:Int32Array,gt="e\0\0",U=-1,Dt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],It=["_approximateExtent"],$,x,D,I,L,E,F,Ot=function(){function n(t,e){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i,r=!1;_t(t)?(i=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(r=!0,i=t),i=i||["x","y"];for(var o={},s=[],u={},a=!1,f={},h=0;h<i.length;h++){var p=i[h],l=J(p)?new T({name:p}):p instanceof T?p:new T(p),m=l.name;l.type=l.type||"float",l.coordDim||(l.coordDim=m,l.coordDimIndex=0);var _=l.otherDims=l.otherDims||{};s.push(m),o[m]=l,f[m]!=null&&(a=!0),l.createInvertedIndices&&(u[m]=[]),_.itemName===0&&(this._nameDimIdx=h),_.itemId===0&&(this._idDimIdx=h),r&&(l.storeDimIndex=h)}if(this.dimensions=s,this._dimInfos=o,this._initGetDimensionInfo(a),this.hostModel=e,this._invertedIndicesMap=u,this._dimOmitted){var S=this._dimIdxToName=G();v(s,function(w){S.set(o[w].storeDimIndex,w)})}}return n.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(e==null)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var i=this._dimIdxToName.get(e);if(i!=null)return i;var r=this._schema.getSourceDimension(e);if(r)return r.name},n.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(e!=null)return e;if(t==null)return-1;var i=this._getDimInfo(t);return i?i.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if(Q(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(i){return e.hasOwnProperty(i)?e[i]:void 0}:function(i){return e[i]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,e){var i=this._dimSummary;if(e==null)return i.encodeFirstDimNotExtra[t];var r=i.encode[t];return r?r[e]:null},n.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,i=e.encode[t];return(i||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,e,i){var r=this,o;if(t instanceof B&&(o=t),!o){var s=this.dimensions,u=Z(t)||j(t)?new V(t,s.length):t;o=new B;var a=c(s,function(f){return{type:r._dimInfos[f].type,property:f}});o.initData(u,a,i)}this._store=o,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=ht(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},n.prototype.appendValues=function(t,e){var i=this._store.appendValues(t,e.length),r=i.start,o=i.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var u=r;u<o;u++){var a=u-r;this._nameList[u]=e[a],s&&F(this,u)}},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,i=0;i<e.length;i++){var r=this._dimInfos[e[i]];r.ordinalMeta&&t.collectOrdinalMeta(r.storeDimIndex,r.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==k&&!t.fillStorage},n.prototype._doInit=function(t,e){if(!(t>=e)){var i=this._store,r=i.getProvider();this._updateOrdinalMeta();var o=this._nameList,s=this._idList,u=r.getSource().sourceFormat,a=u===st;if(a&&!r.pure)for(var f=[],h=t;h<e;h++){var p=r.getItem(h,f);if(!this.hasItemOption&&tt(p)&&(this.hasItemOption=!0),p){var l=p.name;o[h]==null&&l!=null&&(o[h]=A(l,null));var m=p.id;s[h]==null&&m!=null&&(s[h]=A(m,null))}}if(this._shouldMakeIdFromName())for(var h=t;h<e;h++)F(this,h);$(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,e){g(t)?d(this._calculationInfo,t):this._calculationInfo[t]=e},n.prototype.getName=function(t){var e=this.getRawIndex(t),i=this._nameList[e];return i==null&&this._nameDimIdx!=null&&(i=D(this,this._nameDimIdx,e)),i==null&&(i=""),i},n.prototype._getCategory=function(t,e){var i=this._store.get(t,e),r=this._store.getOrdinalMeta(t);return r?r.categories[i]:i},n.prototype.getId=function(t){return x(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,e){var i=this._store,r=this._dimInfos[t];if(r)return i.get(r.storeDimIndex,e)},n.prototype.getByRawIndex=function(t,e){var i=this._store,r=this._dimInfos[t];if(r)return i.getByRawIndex(r.storeDimIndex,e)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,e){var i=this,r=this._store;return N(t)?r.getValues(c(t,function(o){return i._getStoreDimIndex(o)}),e):r.getValues(t)},n.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,i=0,r=e.length;i<r;i++)if(isNaN(this._store.get(e[i],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var e=0,i=this._store.count();e<i;e++)if(this.getName(e)===t)return e;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,e){var i=t&&this._invertedIndicesMap[t],r=i[e];return r==null||isNaN(r)?U:r},n.prototype.indicesOfNearest=function(t,e,i){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,i)},n.prototype.each=function(t,e,i){M(t)&&(i=e,e=t,t=[]);var r=i||this,o=c(I(t),this._getStoreDimIndex,this);this._store.each(o,r?O(e,r):e)},n.prototype.filterSelf=function(t,e,i){M(t)&&(i=e,e=t,t=[]);var r=i||this,o=c(I(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,r?O(e,r):e),this},n.prototype.selectRange=function(t){var e=this,i={},r=et(t);return v(r,function(o){var s=e._getStoreDimIndex(o);i[s]=t[o]}),this._store=this._store.selectRange(i),this},n.prototype.mapArray=function(t,e,i){M(t)&&(i=e,e=t,t=[]),i=i||this;var r=[];return this.each(t,function(){r.push(e&&e.apply(this,arguments))},i),r},n.prototype.map=function(t,e,i,r){var o=i||r||this,s=c(I(t),this._getStoreDimIndex,this),u=E(this);return u._store=this._store.map(s,o?O(e,o):e),u},n.prototype.modify=function(t,e,i,r){var o=i||r||this,s=c(I(t),this._getStoreDimIndex,this);this._store.modify(s,o?O(e,o):e)},n.prototype.downSample=function(t,e,i,r){var o=E(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),e,i,r),o},n.prototype.lttbDownSample=function(t,e){var i=E(this);return i._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),i},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var e=this.hostModel,i=this.getRawDataItem(t);return new it(i,e,e&&e.ecModel)},n.prototype.diff=function(t){var e=this;return new at(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(i){return x(t,i)},function(i){return x(e,i)})},n.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},n.prototype.setVisual=function(t,e){this._visual=this._visual||{},g(t)?d(this._visual,t):this._visual[t]=e},n.prototype.getItemVisual=function(t,e){var i=this._itemVisuals[t],r=i&&i[e];return r??this.getVisual(e)},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,e){var i=this._itemVisuals,r=i[t];r||(r=i[t]={});var o=r[e];return o==null&&(o=this.getVisual(e),N(o)?o=o.slice():g(o)&&(o=d({},o)),r[e]=o),o},n.prototype.setItemVisual=function(t,e,i){var r=this._itemVisuals[t]||{};this._itemVisuals[t]=r,g(e)?d(r,e):r[e]=i},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,e){g(t)?d(this._layout,t):this._layout[t]=e},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,e,i){this._itemLayouts[t]=i?d(this._itemLayouts[t]||{},e):e},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,e){var i=this.hostModel&&this.hostModel.seriesIndex;nt(i,this.dataType,t,e),this._graphicEls[t]=e},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,e){v(this._graphicEls,function(i,r){i&&t&&t.call(e,i,r)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:c(this.dimensions,this._getDimInfo,this),this.hostModel)),L(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,e){var i=this[t];M(i)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var r=i.apply(this,arguments);return e.apply(this,[r].concat(rt(arguments)))})},n.internalField=function(){$=function(t){var e=t._invertedIndicesMap;v(e,function(i,r){var o=t._dimInfos[r],s=o.ordinalMeta,u=t._store;if(s){i=e[r]=new yt(s.categories.length);for(var a=0;a<i.length;a++)i[a]=U;for(var a=0;a<u.count();a++)i[u.get(o.storeDimIndex,a)]=a}})},D=function(t,e,i){return A(t._getCategory(e,i),null)},x=function(t,e){var i=t._idList[e];return i==null&&t._idDimIdx!=null&&(i=D(t,t._idDimIdx,e)),i==null&&(i=gt+e),i},I=function(t){return N(t)||(t=t!=null?[t]:[]),t},E=function(t){var e=new n(t._schema?t._schema:c(t.dimensions,t._getDimInfo,t),t.hostModel);return L(e,t),e},L=function(t,e){v(Dt.concat(e.__wrappedMethods||[]),function(i){e.hasOwnProperty(i)&&(t[i]=e[i])}),t.__wrappedMethods=e.__wrappedMethods,v(It,function(i){t[i]=ot(e[i])}),t._calculationInfo=d({},e._calculationInfo)},F=function(t,e){var i=t._nameList,r=t._idList,o=t._nameDimIdx,s=t._idDimIdx,u=i[e],a=r[e];if(u==null&&o!=null&&(i[e]=u=D(t,o,e)),a==null&&s!=null&&(r[e]=a=D(t,s,e)),a==null&&u!=null){var f=t._nameRepeatCount,h=f[u]=(f[u]||0)+1;a=u,h>1&&(a+="__ec__"+h),r[e]=a}}}(),n}();export{Ot as S};
