import{_ as G}from"./result_mask-DVoKs7o9.js";import{_ as q,p as z,e as o,r as _,g as x,c as w,o as p,a as e,i as g,m as E,y as P,n as U,t as h,j as L,F,l as O,u as S,B as J,D as K}from"./index-cY6tS41h.js";const Q={class:"resultDisplayContainer"},Z={class:"resultContainer"},tt={class:"title"},et={class:"resultList"},st={class:"taskId"},at={class:"idBox"},ot={class:"tag"},nt=["onClick"],lt={key:0,class:"iconBox"},it={key:1,class:"iconBox"},ut={class:"createdTime"},ct={class:"modalBox"},rt={class:"title"},dt={class:"content"},vt=["src","onClick"],ht={style:{"text-align":"center",margin:"2px 0"}},mt=["src"],pt={__name:"index",props:{title:{type:String,default:""},tooltip:{type:String,default:""},emptyMessage:{type:String,default:""},taskList:{type:Array,default:()=>[],required:!0},resultList:{type:Array,default:()=>[],required:!0},modalTitle:{type:String,default:""}},setup(d){const{t:u}=z(),m=d,B=o(()=>m.title||u("components.resultDisplay.title")),C=o(()=>m.tooltip||u("components.resultDisplay.tooltip")),b=o(()=>m.emptyMessage||u("common.message.noResult")),y=o(()=>m.modalTitle||u("components.resultDisplay.modalTitle")),$="https://assets-seaice-eo.52lxy.top",t=_(!1),n=_(null),c=_(null),v=_(!1),i=o(()=>n.value!==null&&m.resultList[n.value]?m.resultList[n.value].images||[]:[]),A=r=>{m.resultList[r]?.status==="完成"&&(t.value=!0,n.value=r)},N=r=>{c.value=r,v.value=!0},D=r=>r?r.startsWith("http")?r:$+r:"";return(r,M)=>{const T=x("vue-fontawesome"),X=x("b-tooltip"),Y=x("b-message"),W=x("b-tag"),H=x("b-notification"),R=x("b-modal");return p(),w("div",Q,[e("div",Z,[e("section",null,[e("h3",tt,[U(h(B.value)+" ",1),g(X,{label:C.value,position:"is-bottom",type:"is-dark"},{default:L(()=>[g(T,{icon:"circle-exclamation"})]),_:1},8,["label"])]),d.taskList.length==0?(p(),E(Y,{key:0},{default:L(()=>[U(h(b.value),1)]),_:1})):P("",!0)]),e("section",et,[(p(!0),w(F,null,O(d.taskList,(l,f)=>(p(),E(H,{closable:!1,key:l.task_id},{default:L(()=>[e("div",st,[e("span",at,h(S(u)("components.resultDisplay.taskId"))+": "+h(l.task_id),1),e("span",ot,[g(W,{type:d.resultList[f]?.status==="完成"?"is-success is-light":"is-warning is-light"},{default:L(()=>[U(h(d.resultList[f]?.status==="完成"?S(u)("common.status.completed"):d.resultList[f]?.status==="进行中"?S(u)("common.status.processing"):d.resultList[f]?.status),1)]),_:2},1032,["type"])])]),e("div",{class:"resultMask",onClick:V=>A(f)},[M[2]||(M[2]=e("img",{src:G,alt:""},null,-1)),d.resultList[f]?.status==="完成"?(p(),w("span",lt,[g(T,{class:"eyeIcon",icon:"eye"})])):(p(),w("span",it,[g(T,{class:"eyeIcon",icon:"eye-slash"})]))],8,nt),e("div",ut,h(S(u)("components.resultDisplay.submitTime"))+": "+h(l.created_time),1)]),_:2},1024))),128))])]),g(R,{modelValue:t.value,"onUpdate:modelValue":M[0]||(M[0]=l=>t.value=l)},{default:L(()=>[e("div",ct,[e("h3",rt,h(y.value),1),e("div",dt,[(p(!0),w(F,null,O(i.value,(l,f)=>(p(),w("li",{class:"imgItem",key:f},[e("img",{src:D(l?.path||l),alt:"Result Image",onClick:V=>N(l?.path||l)},null,8,vt),e("p",ht,h(l?.date),1)]))),128))])])]),_:1},8,["modelValue"]),g(R,{modelValue:v.value,"onUpdate:modelValue":M[1]||(M[1]=l=>v.value=l),class:"previewModal"},{default:L(()=>[e("div",null,[e("img",{src:D(c.value),alt:"Preview Image"},null,8,mt)])]),_:1},8,["modelValue"])])}}},It=q(pt,[["__scopeId","data-v-bad0c63b"]]),_t={class:"image-selector-container"},gt={class:"info-area"},yt=["src"],ft={__name:"index",props:{imageUrl:{type:String,required:!0},width:{type:Number,default:432},height:{type:Number,default:432}},emits:["selection-string"],setup(d,{emit:u}){const{t:m}=z(),B=d,C=u,b=_(null),y=_(null),$=_(!1),t=J({active:!1,x:0,y:0,width:0,height:0,startX:0,startY:0}),n=_(0),c=_(0),v=_(0),i=_(0),A=()=>{if(b.value){const s=b.value.getBoundingClientRect();s.left,s.top}y.value&&(n.value=Math.round(y.value.clientHeight||y.value.naturalHeight||0),c.value=Math.round(y.value.clientWidth||y.value.naturalWidth||0),v.value=y.value.naturalWidth||0,i.value=y.value.naturalHeight||0)},N=s=>{if(s.preventDefault(),!b.value)return;$.value=!0,t.active=!0;const a=b.value.getBoundingClientRect();t.startX=Math.round(s.pageX-a.left-window.scrollX),t.startY=Math.round(s.pageY-a.top-window.scrollY),t.x=t.startX,t.y=t.startY,t.width=0,t.height=0},D=s=>{if(!$.value)return;const a=b.value.getBoundingClientRect(),k=s.pageX-a.left-window.scrollX,I=s.pageY-a.top-window.scrollY;k<t.startX?(t.x=Math.round(k),t.width=Math.round(t.startX-k)):(t.x=Math.round(t.startX),t.width=Math.round(k-t.startX)),I<t.startY?(t.y=Math.round(I),t.height=Math.round(t.startY-I)):(t.y=Math.round(t.startY),t.height=Math.round(I-t.startY))},r=()=>{$.value=!1,t.width===0&&t.height===0?M():V()},M=()=>{t.active=!1,t.width=c.value||v.value||0,t.height=n.value||i.value||0,t.x=0,t.y=0,V()},T=o(()=>({left:`${t.x}px`,top:`${t.y}px`,width:`${t.width}px`,height:`${t.height}px`}));o(()=>({x:Math.round(t.x+t.width),y:Math.round(t.y)})),o(()=>({x:Math.round(t.x),y:Math.round(t.y+t.height)})),o(()=>({x:Math.round(t.x+t.width),y:Math.round(t.y+t.height)}));const X=o(()=>v.value>0?B.width/v.value:1),Y=o(()=>i.value>0?B.height/i.value:1),W=o(()=>{const s=c.value>0?t.x/c.value*v.value:t.x,a=n.value>0?t.y/n.value*i.value:t.y;return{x:Math.round(s*X.value),y:Math.round((i.value-a)*Y.value)}}),H=o(()=>{const s=c.value>0?(t.x+t.width)/c.value*v.value:t.x+t.width,a=n.value>0?t.y/n.value*i.value:t.y;return{x:Math.round(s*X.value),y:Math.round((i.value-a)*Y.value)}}),R=o(()=>{const s=c.value>0?t.x/c.value*v.value:t.x,a=n.value>0?(t.y+t.height)/n.value*i.value:t.y+t.height;return{x:Math.round(s*X.value),y:Math.round((i.value-a)*Y.value)}}),l=o(()=>{const s=c.value>0?(t.x+t.width)/c.value*v.value:t.x+t.width,a=n.value>0?(t.y+t.height)/n.value*i.value:t.y+t.height;return{x:Math.round(s*X.value),y:Math.round((i.value-a)*Y.value)}}),f=o(()=>{const s=R.value,a=W.value,k=l.value,I=H.value;return{bl:s,tl:a,br:k,tr:I}});function V(){C("selection-string",f.value)}return(s,a)=>{const k=x("b-button"),I=x("vue-fontawesome"),j=x("b-tooltip");return p(),w("div",_t,[e("div",gt,[g(k,{onClick:M,size:"is-small"},{default:L(()=>[U(h(S(m)("common.button.clearSelection")),1)]),_:1}),g(j,{style:{margin:"0 5px","line-height":"30px"},label:S(m)("components.imageSelector.defaultSelection"),position:"is-right",type:"is-dark"},{default:L(()=>[g(I,{icon:"circle-exclamation"})]),_:1},8,["label"])]),e("div",{class:"image-area",ref_key:"imageAreaRef",ref:b,onMousedown:N,onMousemove:D,onMouseup:r,onMouseleave:r},[e("img",{ref_key:"imageRef",ref:y,src:d.imageUrl,alt:"Selectable Image",onLoad:A,draggable:"false"},null,40,yt),t.active?(p(),w("div",{key:0,class:"selection-box",style:K(T.value)},null,4)):P("",!0)],544)])}}},Lt=q(ft,[["__scopeId","data-v-1ab209cf"]]),xt={class:"notice-container"},Mt={class:"content"},wt={__name:"index",setup(d){const{t:u}=z();return(m,B)=>{const C=x("vue-fontawesome");return p(),w("div",xt,[e("div",Mt,[g(C,{icon:"desktop",size:"4x",class:"icon"}),e("h3",null,h(S(u)("common.notice.desktopOnlyTitle")),1),e("p",null,h(S(u)("common.notice.desktopOnlyDesc")),1)])])}}},St=q(wt,[["__scopeId","data-v-665937c0"]]);export{St as _,Lt as a,It as b};
