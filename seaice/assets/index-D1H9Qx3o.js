import{_ as L,a as G}from"./index-5T5u6_Y1.js";import{c as H,d as T}from"./index-CqhnPGQh.js";import{d as O,r as S,_,A as F,q as V,s as Y,g,c as h,o as w,a as I,i as o,j as r,u as s,n as f,F as Z,l as j,t as P,z as q}from"./index-BlCOvXY8.js";import"./result_mask-DVoKs7o9.js";const R=O("modelInterpreter",()=>{const i=S([]),l=S([]);function n(e){for(;e.value.length>3;)e.value.splice(3)}function E(e){i.value.unshift(e),U({status:"处理中",task_id:e.task_id,timeId:null}),m(l.value[0]),n(i)}function U(e){l.value.unshift(e),n(l)}function m(e,b=2e3){e.timerId==null&&(e.timerId=setInterval(async()=>{try{const d=await H(e.task_id);(d.status==="COMPLETED"||d.status==="FAILED")&&(e.status=d.status==="COMPLETED"?"完成":"失败",e.images=d.data.images,clearInterval(e.timerId),e.timerId=null)}catch{}},b))}function D(){for(const e of l.value)e.status!=="完成"&&e.status!=="失败"&&m(e)}function C(){for(const e of l.value)e.timerId&&(clearInterval(e.timerId),e.timerId=null)}return{taskList:i,addTask:E,resultList:l,addResult:U,pollTaskStatus:m,clearAllTimers:C,pollAllTaskStatus:D}},{persist:{enabled:!0,strategies:[{key:"modelInterpreter",storage:localStorage,paths:["taskList","resultList"]}]}}),W={class:"modelInterpreterContainer"},X={class:"formContainer"},$=["value"],ee={class:"resultWrapper"},te={__name:"index",setup(J){const i=R(),l=S([null,null]),n=F({start_time:"",end_time:"",pred_gap:1,grad_type:"sum",variable:"",position:""}),E=new Date(1979,0,1),U=new Date(2023,11,31),m=[{label:"海冰密集度(SIC)",value:"1"},{label:"海冰U分量(SI_U)",value:"2"},{label:"海冰V分量(SI_V)",value:"3"},{label:"2米温度(T2M)",value:"4"},{label:"10米U风(U10M)",value:"5"},{label:"10米V风(V10M)",value:"6"}],D=new URL("data:image/webp;base64,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",import.meta.url).href,C=a=>{n.variable=a},e=S(""),b=a=>{const t=a?new Date(a):null;if(e.value="",!t){l.value[0]=null;return}l.value[0]=t.getTime()},d=a=>{const t=l.value&&l.value[0]?l.value[0]:null,p=t?typeof t=="number"?new Date(t):new Date(t):null,c=a?new Date(a):null;if(!p||!c)return;if(Math.ceil((c-p)/(1e3*60*60*24))>=14){const A=k=>{const B=k.getFullYear(),y=String(k.getMonth()+1).padStart(2,"0"),Q=String(k.getDate()).padStart(2,"0");return`${B}${y}${Q}`};l.value=[A(p),A(c)],n.start_time=l.value[0],n.end_time=l.value[1],e.value=""}else e.value="选择范围不足14天，未保存。",l.value=[null,null],n.start_time="",n.end_time=""},M=a=>{n.position=`${a.bl.y},${a.bl.x};${a.tl.y},${a.tl.x};${a.br.y},${a.br.x};${a.tr.y},${a.tr.x}`},N=()=>{e.value||l.value[0]===null||l.value[1]===null||T(n).then(a=>{q(a.message);let t=a.data||{};t.status=a.status||"",t.created_time=new Date().toLocaleString(),i.addTask(t)}).catch(a=>{})};return V(()=>{i.pollAllTaskStatus()}),Y(()=>{i.clearAllTimers()}),(a,t)=>{const p=g("b-datepicker"),c=g("vue-fontawesome"),v=g("b-tooltip"),A=g("b-field"),k=g("b-numberinput"),B=g("b-radio"),y=L,Q=g("b-select"),K=g("b-button"),z=G;return w(),h("div",W,[I("div",X,[I("section",null,[o(A,{label:"数据范围",horizontal:"",class:"datepickerBox",type:s(e)?"is-danger":"",message:s(e)},{default:r(()=>[o(p,{placeholder:"点击选择...",range:"",style:{width:"230px"},size:"is-small","min-date":s(E),"max-date":s(U),onRangeEnd:d,onRangeStart:b},null,8,["min-date","max-date"]),o(v,{style:{margin:"0 10px","line-height":"30px"},label:"日期有效范围为1979-2023,前后范围最短为14天",position:"is-right",type:"is-dark"},{default:r(()=>[o(c,{icon:"circle-exclamation"})]),_:1})]),_:1},8,["type","message"]),o(A,{label:"预测间隔",horizontal:""},{default:r(()=>[o(k,{size:"is-small",type:"is-dark",modelValue:s(n).pred_gap,"onUpdate:modelValue":t[0]||(t[0]=u=>s(n).pred_gap=u),modelModifiers:{number:!0},min:"1",style:{width:"230px",height:"30px"}},null,8,["modelValue"]),t[3]||(t[3]=I("span",{style:{"font-weight":"bold","line-height":"30px"}},"天",-1))]),_:1}),o(A,{label:"分析目标",horizontal:"",class:"gradType"},{default:r(()=>[o(B,{modelValue:s(n).grad_type,"onUpdate:modelValue":t[1]||(t[1]=u=>s(n).grad_type=u),name:"analysisObjective","native-value":"sum",type:"is-black"},{default:r(()=>[...t[4]||(t[4]=[f(" 均值 ",-1)])]),_:1},8,["modelValue"]),o(B,{modelValue:s(n).grad_type,"onUpdate:modelValue":t[2]||(t[2]=u=>s(n).grad_type=u),name:"analysisObjective","native-value":"l2",type:"is-black"},{default:r(()=>[...t[5]||(t[5]=[f(" 分布 ",-1)])]),_:1},8,["modelValue"])]),_:1}),o(A,{label:"选定位置",horizontal:""},{default:r(()=>[o(y,{"image-url":s(D),onSelectionString:M,width:304,height:448},null,8,["image-url"])]),_:1}),o(A,{label:"选定变量",horizontal:""},{default:r(()=>[o(Q,{placeholder:"选择一个变量",size:"is-small","onUpdate:modelValue":C},{default:r(()=>[(w(),h(Z,null,j(m,(u,x)=>I("option",{value:u.value,key:x},P(u.label),9,$)),64))]),_:1})]),_:1}),o(A,{horizontal:""},{default:r(()=>[o(K,{type:"is-dark",size:"is-small",style:{margin:"10px 0"},onClick:N},{default:r(()=>[...t[6]||(t[6]=[f("提交分析",-1)])]),_:1})]),_:1})])]),I("div",ee,[o(z,{title:"逐日模型可解释性分析结果热图",tooltip:"缓存最近三条分析记录",emptyMessage:"提交分析之后才会显示结果热图!",taskList:s(i).taskList,resultList:s(i).resultList,modalTitle:"逐日模型可解释性分析结果热图"},null,8,["taskList","resultList"])])])}}},se=_(te,[["__scopeId","data-v-5e166329"]]);export{se as default};
