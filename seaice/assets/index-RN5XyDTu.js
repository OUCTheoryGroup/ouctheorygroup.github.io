import{_ as H,a as O,b as F}from"./index-DtygwSZS.js";import{c as V,d as Y}from"./index-LnwIdFUs.js";import{d as Z,r as S,_ as j,p as P,B as q,e as R,q as W,s as X,g as c,c as f,o as Q,a as p,i as n,j as u,u as e,t as h,n as w,F as M,l as $,C as ee,A as te}from"./index-cY6tS41h.js";import"./result_mask-DVoKs7o9.js";const ae=Z("modelInterpreter",()=>{const t=S([]),A=S([]);function m(a){for(;a.value.length>3;)a.value.splice(3)}function s(a){t.value.unshift(a),r({status:"处理中",task_id:a.task_id,timeId:null}),I(A.value[0]),m(t)}function r(a){A.value.unshift(a),m(A)}function I(a,v=2e3){a.timerId==null&&(a.timerId=setInterval(async()=>{try{const i=await V(a.task_id);(i.status==="COMPLETED"||i.status==="FAILED")&&(a.status=i.status==="COMPLETED"?"完成":"失败",a.images=i.data.images,clearInterval(a.timerId),a.timerId=null)}catch{}},v))}function D(){for(const a of A.value)a.status!=="完成"&&a.status!=="失败"&&I(a)}function U(){for(const a of A.value)a.timerId&&(clearInterval(a.timerId),a.timerId=null)}return{taskList:t,addTask:s,resultList:A,addResult:r,pollTaskStatus:I,clearAllTimers:U,pollAllTaskStatus:D}},{persist:{enabled:!0,strategies:[{key:"modelInterpreter",storage:localStorage,paths:["taskList","resultList"]}]}}),le={class:"NoticeContainer"},oe={class:"formContainer"},ne={style:{"font-weight":"bold","line-height":"30px"}},re=["value"],se={class:"resultWrapper"},ie={__name:"index",setup(N){const{t,locale:A}=P(),m=ae(),s=S([null,null]),r=q({start_time:"",end_time:"",pred_gap:1,grad_type:"sum",variable:"",position:""}),I=new Date(1979,0,1),D=new Date(2023,11,31),U=R(()=>[{label:t("modelInterpreter.variables.sic"),value:"1"},{label:t("modelInterpreter.variables.si_u"),value:"2"},{label:t("modelInterpreter.variables.si_v"),value:"3"},{label:t("modelInterpreter.variables.t2m"),value:"4"},{label:t("modelInterpreter.variables.u10m"),value:"5"},{label:t("modelInterpreter.variables.v10m"),value:"6"}]),a=new URL("data:image/webp;base64,UklGRlYPAABXRUJQVlA4TEkPAAAv5MTNAQ9wbPRHvH67fP7DA76cbatj27atz+KCS3JQnJGiTrai9z7GAGkcarboKhmh5IBLLhDfhQGDw2VI/mttY0T0fwI4rvG/zf8DSja/GzgkI2+oE80fcyhvmMi0iRuQibu0MQduwqa9/37ADYUK8FrUfNMikJQ1tCg8Eah+nI/nrTtSSPXDRKqHzmHMeZ31j0L1zNGNdX+MSu6PXxggt6Fk7iryuaPpIYxwG3jJO5oeUA4JJzJvKvH43JFE3OsGwJPUALmhnR08eU98/o42fFlkahhgANnJlrZDpkHaO578RSNfMgHgo5NJChj9wmBgG7ecJIHzulfZNyKHt0Q5hcERSBfqAZSOES8Oo6FDc0dJFFBPwR1TFrgRlIN+4Y6TLNAYDiQd7pkSJ8sC50k9gMJf4u944NYI1LhlT3lAgAbt4m7JUyBoJKJHfUdZIDgMBTrZsqM0NEAAqFQAMrVo4YZuMkAlSQX4W/KSgKoDgE0LIDvhQn65RmJfvXDHoooNjrs7QhYGdMg86+4IEAYzbypJB+pbgnRwuOckHKjvCZA5SeSg/n4QJYPDfVe54HDnVeREsaBvDVEoOEgcOpGjfzvQuPcqEywkjrq5SJGgcPNV4kT+KafKBIt7jxRY6p6869QH79cSe0uBdADYfeQc/E9Eaj56GvA/DQrHHzkHIC2guotMM+Klg8V9UOaYxt9wzE+f/pm8eMJPUtUB+eFzXv8UbFkZkDWQ5qkbogLgKQFwuXw1z6MZ8Hz66PAGmeYtKAgc3sDzap5NA3wgHID88FH/KHVHoQKA/PC5wzGeMKjTPEleC36AJK2cQhwDUGkxMbB5MeQDgHigAjwfPuoe6pl4MwZAFRCoU8pbZJLEgAOQnz7qXhjBtMC2uZ4BUNnWUiBxO2EO+LyZyK6TAu0ygGnlPXwLsUP9/DlMMY2Zb4J8zvPp05cKfBNkgxNZNDnMIeK2Bu9ZO7+ePz1t8gAv9gJosPc0/MPnsObzVHmbF2gS+7IgcHgDENQCcy3vwGG5YDA18E38L45+0QHIz56ehuPnCl4qc1QFaQCUnjlEi88bCGpsQ1sUhB6O1QY1z1wHgf0Ng4LJ4mwYqlSn6ggvZ8gdQqLYGygqNzDuKRUi+UWq9/tEA5IBZWgPpJ1mroM5WSQYIJJ7IdU0musEuiwd/NB2X95lWYBMEgAq+c0zkeP7lTzNCeDZU3N057iC3M7UrdopyA7+VKZYspjicIxX2M9EknaKdzjtKQ/0kIV3A/UUtxN12kxpUJR3aNaGQl6yDyUe57wmID96aoJDd4CuF89RjaBBO2Oqf/Iszode4gD1JYyYsJid34JGSlDN8Q4AOEQzz45wrwcq8WDnNFPHBl4F3GPDXgOQUkW1EvsNjSskop76EApUJwKpGjzbQz1H1QPwUc90g5MNKBZeT3Doh0WYpmd4Pnn2DADvWkB9g/g9Z24WBuWQCETOAMop2iFEkuoSmcLg39Ad0Wtoh1Atrlg4/sCpE8ECRXeA2nIYDhOoh/6GKwaSGoKAJN0AakOPVDXFDV0ykNRASiIK5Uw8OAzZMoP6YigkHfDgUZ0IJPUIyplIizLDXSaSG1BIl102T54dq5yix2brixiSewuAwYNHPYQw9nE3ia1Aak9t0pNHPYRCh27l935wIwj8muOuwYH/1J4EHj26oUDndW/HgW6k2vA2ib1iAWQNmEePNEDagUqFMhC5Rx71CFDmUK/zHFGApwaA+ug1v7dK2kCNbt1a1APhi++SR46elFBNi3/zJHkAJiBMccBrmecEIwhI1zCHj9rQ6Ed+zVqfe1srCwbEhhua6zzddXYAhUeTgCgH8grUOTpTX6mwDUiCtgHihtrQy8grjQoFoOVwAYd3qcKAvJZ+mygHnG+YOShzHJZ7zjTyCvF7nxA41eE9IAzwygdENvU6unXIM4wsoAZAmo/aULiAfg80qxigPnQtxuu7eJ7XaEdRkHq0Y2GOw/p8zkEeOACpp8bqFIUr5lO6V6WAy1f7ol7neVajGykG/IGTwhTSXc4BnpKKGkMW43WSXpcnZC0NqIHUo72Axju8IAds6XFS5GT9Dt0qAgAUOsxDneSWZU6rlAC0CGylnhqKnOuw3J9SrcSmBIAnNYDEvd7SjkKLNsVAUch0AMg9HhSG6xyL9Xlgx2gSAnslLTKpD9wqaTEcOVuvChzchiiiEEjVSuQeSTUSOV1jdRnYASAoWbAd/pMkAZDcMMz5FhfaBMKOg8qtRHK/hloW2N8x6DWSDNiAoIryJA2A2CjUrTRNYXmZRABSoJlbqNwQSNfi2wQOYtD/0tLAdwAE9tI8qssVha4oAEAmbgAKSb3K4mqFdEAmEiXADlTVAUnuiBxAmqYWfaAMGACRR+05KpoiVVHAKxNpQCFTvxECxyqlAfdIWgCZNIctkhZYpXCpSHmwVZIK8CQx4ukAgO8R+TUCVIGwj4E7Ki1QSLoFFsuGBUIi99hCPgCIpGqQBuk9UAcMECkNELnVERqgbpUqsI1jnUC1Kg5gDFkK7JU93dojbenwEK8Xv3tGJgANqkNqoQyYWRarOMYRL6Iqm66FDpB/LVGXcQCSODCI7GqMFtUjuaNOsKtqj2bMCQGAfdepGyJVsPAdbteLHKNkoG4kcotUwMiOejXEAZ7JEsAgjZAaACp3FAV4Du4Ib2Q47MRCJLdPfCKP0L7TSblQyQ3BnkGhywPf6+q08QcvIfb0CwASKnccx2jDyF4lG2ki+d1CK3IDAtUJKgC5YfCBSrUmUkq4VwOIOwAU5U9YAL7BHYjSg9xjA8dEgw8An0Uhj6kRblhfhQPOcQPwWag8SXMCyI1dfkRudYQ0OBYL5CGF9mHH+khRkZgMELeGJ01qWXQTaTAx0goLILKXycQNQAOZBLlX7lhKfpPbCVThYA7/IkkNTxJpBxC+LLxGJmh2fGApuUfuOBuFFz4CSQd4JqL7iasmHrdTVUCgkqQDkGguh0Ryx+koIUKPh7jh0oftHKotkoEHAIXUncpvdSWSO+J2KtogHwLZYdriHi+VEknaU0APUiGy2cDxA5cCELmtSET9FgbmBACDuOHSTJgdWgbHKgoMgMiBBJIbLsZ9FkqDjSioDIA6gERuuHgit0XmgCoJSABxhG+xY3YYiNxEgcGxDuH6AoMD/+lwwBsmzM8NAqic+eSZQ/N1uFkvFrj3bjk3DBClAW7dNyAPcINpBXIj7sJurSdpwMlPnrk5ZBJJ3ABGIuAn5AO31zXmJ0iPG8gd8afD85a4RS6FSAEifzKvM+URV98elz5ZqD+cwzOHusKYWzArkB3SM4e6AreY9hVeAw9d/Nc83kIyWP3QIdzb+vTUocwz9xao4bnw8QrzaG4vSyWEOzMrHMQK0zwAnk8eyo2BM+Leyc9emMb3SwnnE9nxfPbgp5m3A08xkeTeyE9fmca3SzjLdss/ff5nyBxUADylyrhnE4gtZNGE/AN4HnGMLS8W9hsppEO3NvLj5+8vkA79ePCUMA5nBQO32yjUgmK/i0CH4aKA/Pwh31wg1alA8VKoMB6sgPLTuN1DsDj7CXgBgHxvE4sNlAB+Greb4vKHDHna/sccboLlhXn2LYISEZ4r1VvQSTaL96Ce4JloEnexgkI3Q7O5AUEMmHsJ1BOAFqmEQCZNuhknJHgrRUJ4kriXMOUFoGVRZIBDur9mg0oG/NLgvSDrCV6DJjUuKIA08s18Yi5pUOUA4Dl/e4/i5oAEohAI6n4CqSe8YBINUIWAA/K8De/izhSNrJlI7ogSoFDdD4rGyUCNzAY3CRBokX/xbkYjaYFC6sz2jiIEeFuGPAQObUChfeWHT3nOdEjvlakBsP3FoT3uOAqmQlUmIR3293EjzYFKBeD17IVZNABQub2LJ3/x5C8OkLZw8eMFYILOnTfOnN9Y/8BZIJPkXV30AQs8q27BSwiXT3gezRsFvv0DVk5ZIB/wxkU+BNLhlJd+DvBDalaSJ3nIAsgzaK4TKCEUgDxCBXiac4nyBGfmXghFPhSLYxqwkC+B59QAt7GVn96dCIICaQK5XaKQZwAvJAw6Fv1Ecl8WaQNJ6hNBe9GlGsd6UCe4BbWmTio6ywaUsT0OgeQWSKoV+ADKBHjKhmAxGjeMk/xmV087BjqczZKi7/WBZ1fA6zOB0oFqJG4duhlccbpQVNS9BbyAdI7zgjpRKB5QhuJANlPMtNMCInAIH73jBHKbU+xA5CbALBbGHfUKgQMkNxTKB3yuAFD5tQ6f6KZDpfyINgxtcZ8yeLjJxyuoRcCQAT7WUE7YVYFrIr9Jqk4SE/hcVYeOW+vVqmwq6UIFwJM0ooYWyCQJJHY7EGLLZ1C1CPbdwSCJkTBjqnshSxKUaxxFxeeycB2CcmJ15ZWTnAh2TeQP/exVShW1IlLkrZUrQa1AlCr4XIL4V0+r61/3xT/moP7/1MKfdyByTBImL5GzNigUeQMgNCBsUBr8/SCJHAibf/OkBmhQJYnXi+BJNlAFyXr/izRIBoiCBsgHAKjSpils+HvBayT+2QaepBE3yD2UP+aEP9pk/fsBj436JXIobMwBn0XIeA6hWABZnHyeCuy2UJREOT9gWk0vWOp2+M8pQDJSpe0nHevvB6giJ4ocVLFSOtwETeCSKFXKGlShEnoGggZ+Tfj9AEWoIEsezC5/nDHTgkzxXIQiUkoLsgZ5VRB4/mAWoIgUZJJY6UWK5ypkqWLWeIHzCWShgpVFwcsUveQTomZvwfNuRZSDvEGeBSCSKvynUNFzUqcIlRcmcUMlbaBMmZ24V96zEPB6DrmJFrz+us/rSd8ULZNFThI6O6q4ISF0orRJf93HP+Uk0vwRx7NRZQ2AQ/xrvkSRY0QOpA6qyInixgBA/Z2AQuZjLBEy5mQniJe4jSS2UKTLWRpx4w0SpEzdOkAvyBdE9TtDv8gXfAqf1AkCJqgeTQtFvgwmohskzGeLAygCpp0kTuaQF3+fL8/jALKAQeYpL2ACzyHLl9IxoiZ0IGrgJ3gBA98gtx68gEFu7BjNJA2q3PMNbiOQMQbkPoRkgChcDADUbagZJUs7cgKidEncMbMIF3KbEs6pIEoQ9ykoZywQBEkymHxqA1B+L7A4ZjGC/RpUBy9GeBUqAMhEkiAktzkop+zhKEDSgjCyRzGD0AOAQNVL8oMrgNxAM1hhss/zB9NCsK1E2ZYO20W6vLBcAMkdCzNJyhRu8zwnZAkAAA==",import.meta.url).href,v=l=>{r.variable=l},i=S(""),K=l=>{const o=l?new Date(l):null;if(i.value="",!o){s.value[0]=null;return}s.value[0]=o.getTime()},z=l=>{const o=s.value&&s.value[0]?s.value[0]:null,k=o?typeof o=="number"?new Date(o):new Date(o):null,b=l?new Date(l):null;if(!k||!b)return;if(Math.ceil((b-k)/(1e3*60*60*24))>=14){const d=B=>{const E=B.getFullYear(),C=String(B.getMonth()+1).padStart(2,"0"),y=String(B.getDate()).padStart(2,"0");return`${E}${C}${y}`};s.value=[d(k),d(b)],r.start_time=s.value[0],r.end_time=s.value[1],i.value=""}else i.value=t("modelInterpreter.error.rangeTooShort"),s.value=[null,null],r.start_time="",r.end_time=""},_=l=>{r.position=`${l.bl.y},${l.bl.x};${l.tl.y},${l.tl.x};${l.br.y},${l.br.x};${l.tr.y},${l.tr.x}`},x=()=>{i.value||s.value[0]===null||s.value[1]===null||Y(r).then(l=>{te(l.message);let o=l.data||{};o.status=l.status||"",o.created_time=new Date().toLocaleString(),m.addTask(o)}).catch(l=>{})};return W(()=>{m.pollAllTaskStatus()}),X(()=>{m.clearAllTimers()}),(l,o)=>{const k=c("b-datepicker"),b=c("vue-fontawesome"),J=c("b-tooltip"),d=c("b-field"),B=c("b-numberinput"),E=c("b-radio"),C=O,y=c("b-select"),L=c("b-button"),T=F;return Q(),f(M,null,[p("div",le,[n(H)]),p("div",{class:ee(["modelInterpreterContainer",{"is-en":e(A)==="en-US"}])},[p("div",oe,[p("section",null,[n(d,{label:e(t)("modelInterpreter.dataRange"),horizontal:"",class:"datepickerBox",type:e(i)?"is-danger":"",message:e(i)},{default:u(()=>[n(k,{placeholder:e(t)("common.placeholder.select"),range:"",style:{width:"230px"},size:"is-small","min-date":e(I),"max-date":e(D),onRangeEnd:z,onRangeStart:K},null,8,["placeholder","min-date","max-date"]),n(J,{style:{margin:"0 10px","line-height":"30px"},label:e(t)("modelInterpreter.tooltip"),position:"is-right",type:"is-dark"},{default:u(()=>[n(b,{icon:"circle-exclamation"})]),_:1},8,["label"])]),_:1},8,["label","type","message"]),n(d,{label:e(t)("modelInterpreter.forecastInterval"),horizontal:""},{default:u(()=>[n(B,{size:"is-small",type:"is-dark",modelValue:e(r).pred_gap,"onUpdate:modelValue":o[0]||(o[0]=g=>e(r).pred_gap=g),modelModifiers:{number:!0},min:"1",style:{width:"230px",height:"30px"}},null,8,["modelValue"]),p("span",ne,h(e(t)("common.unit.day")),1)]),_:1},8,["label"]),n(d,{label:e(t)("modelInterpreter.analysisTarget"),horizontal:"",class:"gradType"},{default:u(()=>[n(E,{modelValue:e(r).grad_type,"onUpdate:modelValue":o[1]||(o[1]=g=>e(r).grad_type=g),name:"analysisObjective","native-value":"sum",type:"is-black"},{default:u(()=>[w(h(e(t)("modelInterpreter.mean")),1)]),_:1},8,["modelValue"]),n(E,{modelValue:e(r).grad_type,"onUpdate:modelValue":o[2]||(o[2]=g=>e(r).grad_type=g),name:"analysisObjective","native-value":"l2",type:"is-black"},{default:u(()=>[w(h(e(t)("modelInterpreter.distribution")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),n(d,{label:e(t)("modelInterpreter.selectedPosition"),horizontal:""},{default:u(()=>[n(C,{"image-url":e(a),onSelectionString:_,width:304,height:448},null,8,["image-url"])]),_:1},8,["label"]),n(d,{label:e(t)("modelInterpreter.selectedVariable"),horizontal:""},{default:u(()=>[n(y,{placeholder:e(t)("common.placeholder.selectVariable"),size:"is-small","onUpdate:modelValue":v},{default:u(()=>[(Q(!0),f(M,null,$(e(U),(g,G)=>(Q(),f("option",{value:g.value,key:G},h(g.label),9,re))),128))]),_:1},8,["placeholder"])]),_:1},8,["label"]),n(d,{horizontal:""},{default:u(()=>[n(L,{type:"is-dark",size:"is-small",style:{margin:"10px 0"},onClick:x},{default:u(()=>[w(h(e(t)("common.button.submitAnalysis")),1)]),_:1})]),_:1})])]),p("div",se,[n(T,{title:e(t)("modelInterpreter.resultTitle"),tooltip:e(t)("modelInterpreter.resultTooltip"),emptyMessage:e(t)("common.message.submitToView"),taskList:e(m).taskList,resultList:e(m).resultList,modalTitle:e(t)("modelInterpreter.resultModalTitle")},null,8,["title","tooltip","emptyMessage","taskList","resultList","modalTitle"])])],2)],64)}}},ge=j(ie,[["__scopeId","data-v-33e0d7de"]]);export{ge as default};
