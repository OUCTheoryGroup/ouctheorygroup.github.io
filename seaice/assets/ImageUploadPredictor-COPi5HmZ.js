import{l as me,N as q,m as W,n as Q,p as Z,b as E,q as tt,P as re,s as M,t as P,v as st,o as Te,x as ot,y as Fe,z as ie,A as ge,B as oe,C as Re,D as ue,E as U,c as T,e as h,a as k,F as D,G as C,g as e,H as V,w as S,f as j,I as Be,J as at,K as G,M as J,O as lt,Q as nt,R as rt,S as le,T as be,U as ee,V as it,W as ut,X as dt,Y as ct,Z as ft,$ as pt,a0 as ke,r as A,a1 as vt,a2 as mt,a3 as Ce,a4 as gt,a5 as yt,a6 as ht,a7 as bt,a8 as kt,a9 as Ct,aa as de,ab as ce,ac as wt,ad as $t,ae as Me,af as ye,ag as Et,ah as Ie,ai as St,aj as he,ak as Ue,al as we,am as Oe,an as Ae,ao as fe,ap as Lt,aq as _t,ar as Ne,as as te,at as Pt,au as qe,av as ze,aw as Dt,ax as pe,ay as $e,az as Tt,aA as Ft,aB as Rt,aC as Bt,_ as Mt,aD as It,aE as Ut,aF as Ot,aG as At,L as Nt,d as qt}from"./index-BqVaevRk.js";import{b as zt,U as je,u as jt,a as ne,i as Wt,c as Ht,d as Yt,e as x}from"./el-button-BP5sAS0I.js";var Kt=1,Vt=4;function Ee(s){return zt(s,Kt|Vt)}let ae;const Xt=s=>{var o;if(!me)return 0;if(ae!==void 0)return ae;const t=document.createElement("div");t.className=`${s}-scrollbar__wrap`,t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);const u=t.offsetWidth;t.style.overflow="scroll";const r=document.createElement("div");r.style.width="100%",t.appendChild(r);const c=r.offsetWidth;return(o=t.parentNode)==null||o.removeChild(t),ae=u-c,ae},We=s=>{if(!s)return{onClick:q,onMousedown:q,onMouseup:q};let o=!1,t=!1;return{onClick:i=>{o&&t&&s(i),o=t=!1},onMousedown:i=>{o=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},Gt=Q({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:P([String,Array,Object])},zIndex:{type:P([String,Number])}}),Jt={click:s=>s instanceof MouseEvent},Zt="overlay";var Qt=W({name:"ElOverlay",props:Gt,emits:Jt,setup(s,{slots:o,emit:t}){const u=Z(Zt),r=v=>{t("click",v)},{onClick:c,onMousedown:i,onMouseup:$}=We(s.customMaskEvent?void 0:r);return()=>s.mask?E("div",{class:[u.b(),s.overlayClass],style:{zIndex:s.zIndex},onClick:c,onMousedown:i,onMouseup:$},[M(o,"default")],re.STYLE|re.CLASS|re.PROPS,["onClick","onMouseup","onMousedown"]):tt("div",{class:s.overlayClass,style:{zIndex:s.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[M(o,"default")])}});const xt=Qt,He=Symbol("dialogInjectionKey"),Ye=Q({center:Boolean,alignCenter:Boolean,closeIcon:{type:st},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,headerClass:String,bodyClass:String,footerClass:String,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),es={close:()=>!0},ts=(s,o,t,u)=>{let r={offsetX:0,offsetY:0};const c=b=>{const w=b.clientX,y=b.clientY,{offsetX:F,offsetY:n}=r,f=s.value.getBoundingClientRect(),a=f.left,p=f.top,m=f.width,B=f.height,d=document.documentElement.clientWidth,_=document.documentElement.clientHeight,N=-a+F,I=-p+n,O=d-a-m+F,H=_-p-B+n,Y=l=>{let g=F+l.clientX-w,L=n+l.clientY-y;u!=null&&u.value||(g=Math.min(Math.max(g,N),O),L=Math.min(Math.max(L,I),H)),r={offsetX:g,offsetY:L},s.value&&(s.value.style.transform=`translate(${ie(g)}, ${ie(L)})`)},K=()=>{document.removeEventListener("mousemove",Y),document.removeEventListener("mouseup",K)};document.addEventListener("mousemove",Y),document.addEventListener("mouseup",K)},i=()=>{o.value&&s.value&&o.value.addEventListener("mousedown",c)},$=()=>{o.value&&s.value&&o.value.removeEventListener("mousedown",c)},v=()=>{r={offsetX:0,offsetY:0},s.value&&(s.value.style.transform="none")};return Te(()=>{ot(()=>{t.value?i():$()})}),Fe(()=>{$()}),{resetPosition:v}},ss=(...s)=>o=>{s.forEach(t=>{ge(t)?t(o):t.value=o})},os=W({name:"ElDialogContent"}),as=W({...os,props:Ye,emits:es,setup(s,{expose:o}){const t=s,{t:u}=Re(),{Close:r}=at,{dialogRef:c,headerRef:i,bodyId:$,ns:v,style:b}=ue(He),{focusTrapRef:w}=ue(lt),y=U(()=>[v.b(),v.is("fullscreen",t.fullscreen),v.is("draggable",t.draggable),v.is("align-center",t.alignCenter),{[v.m("center")]:t.center}]),F=ss(w,c),n=U(()=>t.draggable),f=U(()=>t.overflow),{resetPosition:a}=ts(c,i,n,f);return o({resetPosition:a}),(p,m)=>(h(),T("div",{ref:e(F),class:C(e(y)),style:J(e(b)),tabindex:"-1"},[k("header",{ref_key:"headerRef",ref:i,class:C([e(v).e("header"),p.headerClass,{"show-close":p.showClose}])},[M(p.$slots,"header",{},()=>[k("span",{role:"heading","aria-level":p.ariaLevel,class:C(e(v).e("title"))},V(p.title),11,["aria-level"])]),p.showClose?(h(),T("button",{key:0,"aria-label":e(u)("el.dialog.close"),class:C(e(v).e("headerbtn")),type:"button",onClick:B=>p.$emit("close")},[E(e(G),{class:C(e(v).e("close"))},{default:S(()=>[(h(),j(Be(p.closeIcon||e(r))))]),_:1},8,["class"])],10,["aria-label","onClick"])):D("v-if",!0)],2),k("div",{id:e($),class:C([e(v).e("body"),p.bodyClass])},[M(p.$slots,"default")],10,["id"]),p.$slots.footer?(h(),T("footer",{key:0,class:C([e(v).e("footer"),p.footerClass])},[M(p.$slots,"footer")],2)):D("v-if",!0)],6))}});var ls=oe(as,[["__file","dialog-content.vue"]]);const ns=Q({...Ye,appendToBody:Boolean,appendTo:{type:P([String,Object]),default:"body"},beforeClose:{type:P(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,headerClass:String,bodyClass:String,footerClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),rs={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[je]:s=>nt(s),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},is=(s,o={})=>{rt(s)||le("[useLockscreen]","You need to pass a ref param to this function");const t=o.ns||Z("popup"),u=U(()=>t.bm("parent","hidden"));if(!me||be(document.body,u.value))return;let r=0,c=!1,i="0";const $=()=>{setTimeout(()=>{typeof document>"u"||c&&document&&(document.body.style.width=i,ct(document.body,u.value))},200)};ee(s,v=>{if(!v){$();return}c=!be(document.body,u.value),c&&(i=document.body.style.width,it(document.body,u.value)),r=Xt(t.namespace.value);const b=document.documentElement.clientHeight<document.body.scrollHeight,w=ut(document.body,"overflowY");r>0&&(b||w==="scroll")&&c&&(document.body.style.width=`calc(100% - ${r}px)`)}),dt(()=>$())},us=(s,o)=>{var t;const r=ft().emit,{nextZIndex:c}=pt();let i="";const $=ke(),v=ke(),b=A(!1),w=A(!1),y=A(!1),F=A((t=s.zIndex)!=null?t:c());let n,f;const a=vt("namespace",mt),p=U(()=>{const z={},X=`--${a.value}-dialog`;return s.fullscreen||(s.top&&(z[`${X}-margin-top`]=s.top),s.width&&(z[`${X}-width`]=ie(s.width))),z}),m=U(()=>s.alignCenter?{display:"flex"}:{});function B(){r("opened")}function d(){r("closed"),r(je,!1),s.destroyOnClose&&(y.value=!1)}function _(){r("close")}function N(){f==null||f(),n==null||n(),s.openDelay&&s.openDelay>0?{stop:n}=Ce(()=>Y(),s.openDelay):Y()}function I(){n==null||n(),f==null||f(),s.closeDelay&&s.closeDelay>0?{stop:f}=Ce(()=>K(),s.closeDelay):K()}function O(){function z(X){X||(w.value=!0,b.value=!1)}s.beforeClose?s.beforeClose(z):I()}function H(){s.closeOnClickModal&&O()}function Y(){me&&(b.value=!0)}function K(){b.value=!1}function l(){r("openAutoFocus")}function g(){r("closeAutoFocus")}function L(z){var X;((X=z.detail)==null?void 0:X.focusReason)==="pointer"&&z.preventDefault()}s.lockScroll&&is(b);function R(){s.closeOnPressEscape&&O()}return ee(()=>s.modelValue,z=>{z?(w.value=!1,N(),y.value=!0,F.value=gt(s.zIndex)?c():F.value++,yt(()=>{r("open"),o.value&&(o.value.parentElement.scrollTop=0,o.value.parentElement.scrollLeft=0,o.value.scrollTop=0)})):b.value&&I()}),ee(()=>s.fullscreen,z=>{o.value&&(z?(i=o.value.style.transform,o.value.style.transform=""):o.value.style.transform=i)}),Te(()=>{s.modelValue&&(b.value=!0,y.value=!0,N())}),{afterEnter:B,afterLeave:d,beforeLeave:_,handleClose:O,onModalClick:H,close:I,doClose:K,onOpenAutoFocus:l,onCloseAutoFocus:g,onCloseRequested:R,onFocusoutPrevented:L,titleId:$,bodyId:v,closed:w,style:p,overlayDialogStyle:m,rendered:y,visible:b,zIndex:F}},ds=W({name:"ElDialog",inheritAttrs:!1}),cs=W({...ds,props:ns,emits:rs,setup(s,{expose:o}){const t=s,u=ht();jt({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},U(()=>!!u.title));const r=Z("dialog"),c=A(),i=A(),$=A(),{visible:v,titleId:b,bodyId:w,style:y,overlayDialogStyle:F,rendered:n,zIndex:f,afterEnter:a,afterLeave:p,beforeLeave:m,handleClose:B,onModalClick:d,onOpenAutoFocus:_,onCloseAutoFocus:N,onCloseRequested:I,onFocusoutPrevented:O}=us(t,c);Me(He,{dialogRef:c,headerRef:i,bodyId:w,ns:r,rendered:n,style:y});const H=We(d),Y=U(()=>t.draggable&&!t.fullscreen);return o({visible:v,dialogContentRef:$,resetPosition:()=>{var l;(l=$.value)==null||l.resetPosition()}}),(l,g)=>(h(),j(e($t),{to:l.appendTo,disabled:l.appendTo!=="body"?!1:!l.appendToBody},{default:S(()=>[E(bt,{name:"dialog-fade",onAfterEnter:e(a),onAfterLeave:e(p),onBeforeLeave:e(m),persisted:""},{default:S(()=>[kt(E(e(xt),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":e(f)},{default:S(()=>[k("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:e(b),"aria-describedby":e(w),class:C(`${e(r).namespace.value}-overlay-dialog`),style:J(e(F)),onClick:e(H).onClick,onMousedown:e(H).onMousedown,onMouseup:e(H).onMouseup},[E(e(Ct),{loop:"",trapped:e(v),"focus-start-el":"container",onFocusAfterTrapped:e(_),onFocusAfterReleased:e(N),onFocusoutPrevented:e(O),onReleaseRequested:e(I)},{default:S(()=>[e(n)?(h(),j(ls,de({key:0,ref_key:"dialogContentRef",ref:$},l.$attrs,{center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:e(Y),overflow:l.overflow,fullscreen:l.fullscreen,"header-class":l.headerClass,"body-class":l.bodyClass,"footer-class":l.footerClass,"show-close":l.showClose,title:l.title,"aria-level":l.headerAriaLevel,onClose:e(B)}),ce({header:S(()=>[l.$slots.title?M(l.$slots,"title",{key:1}):M(l.$slots,"header",{key:0,close:e(B),titleId:e(b),titleClass:e(r).e("title")})]),default:S(()=>[M(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:S(()=>[M(l.$slots,"footer")])}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","header-class","body-class","footer-class","show-close","title","aria-level","onClose"])):D("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,["aria-label","aria-labelledby","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["mask","overlay-class","z-index"]),[[wt,e(v)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])]),_:3},8,["to","disabled"]))}});var fs=oe(cs,[["__file","dialog.vue"]]);const ps=ye(fs),vs=Q({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:s=>s>=0&&s<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:Boolean,duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:P(String),default:"round"},textInside:Boolean,width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:P([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:P(Function),default:s=>`${s}%`}}),ms=W({name:"ElProgress"}),gs=W({...ms,props:vs,setup(s){const o=s,t={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},u=Z("progress"),r=U(()=>{const d={width:`${o.percentage}%`,animationDuration:`${o.duration}s`},_=B(o.percentage);return _.includes("gradient")?d.background=_:d.backgroundColor=_,d}),c=U(()=>(o.strokeWidth/o.width*100).toFixed(1)),i=U(()=>["circle","dashboard"].includes(o.type)?Number.parseInt(`${50-Number.parseFloat(c.value)/2}`,10):0),$=U(()=>{const d=i.value,_=o.type==="dashboard";return`
          M 50 50
          m 0 ${_?"":"-"}${d}
          a ${d} ${d} 0 1 1 0 ${_?"-":""}${d*2}
          a ${d} ${d} 0 1 1 0 ${_?"":"-"}${d*2}
          `}),v=U(()=>2*Math.PI*i.value),b=U(()=>o.type==="dashboard"?.75:1),w=U(()=>`${-1*v.value*(1-b.value)/2}px`),y=U(()=>({strokeDasharray:`${v.value*b.value}px, ${v.value}px`,strokeDashoffset:w.value})),F=U(()=>({strokeDasharray:`${v.value*b.value*(o.percentage/100)}px, ${v.value}px`,strokeDashoffset:w.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"})),n=U(()=>{let d;return o.color?d=B(o.percentage):d=t[o.status]||t.default,d}),f=U(()=>o.status==="warning"?Et:o.type==="line"?o.status==="success"?Ie:St:o.status==="success"?he:Ue),a=U(()=>o.type==="line"?12+o.strokeWidth*.4:o.width*.111111+2),p=U(()=>o.format(o.percentage));function m(d){const _=100/d.length;return d.map((I,O)=>we(I)?{color:I,percentage:(O+1)*_}:I).sort((I,O)=>I.percentage-O.percentage)}const B=d=>{var _;const{color:N}=o;if(ge(N))return N(d);if(we(N))return N;{const I=m(N);for(const O of I)if(O.percentage>d)return O.color;return(_=I[I.length-1])==null?void 0:_.color}};return(d,_)=>(h(),T("div",{class:C([e(u).b(),e(u).m(d.type),e(u).is(d.status),{[e(u).m("without-text")]:!d.showText,[e(u).m("text-inside")]:d.textInside}]),role:"progressbar","aria-valuenow":d.percentage,"aria-valuemin":"0","aria-valuemax":"100"},[d.type==="line"?(h(),T("div",{key:0,class:C(e(u).b("bar"))},[k("div",{class:C(e(u).be("bar","outer")),style:J({height:`${d.strokeWidth}px`})},[k("div",{class:C([e(u).be("bar","inner"),{[e(u).bem("bar","inner","indeterminate")]:d.indeterminate},{[e(u).bem("bar","inner","striped")]:d.striped},{[e(u).bem("bar","inner","striped-flow")]:d.stripedFlow}]),style:J(e(r))},[(d.showText||d.$slots.default)&&d.textInside?(h(),T("div",{key:0,class:C(e(u).be("bar","innerText"))},[M(d.$slots,"default",{percentage:d.percentage},()=>[k("span",null,V(e(p)),1)])],2)):D("v-if",!0)],6)],6)],2)):(h(),T("div",{key:1,class:C(e(u).b("circle")),style:J({height:`${d.width}px`,width:`${d.width}px`})},[(h(),T("svg",{viewBox:"0 0 100 100"},[k("path",{class:C(e(u).be("circle","track")),d:e($),stroke:`var(${e(u).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":d.strokeLinecap,"stroke-width":e(c),fill:"none",style:J(e(y))},null,14,["d","stroke","stroke-linecap","stroke-width"]),k("path",{class:C(e(u).be("circle","path")),d:e($),stroke:e(n),fill:"none",opacity:d.percentage?1:0,"stroke-linecap":d.strokeLinecap,"stroke-width":e(c),style:J(e(F))},null,14,["d","stroke","opacity","stroke-linecap","stroke-width"])]))],6)),(d.showText||d.$slots.default)&&!d.textInside?(h(),T("div",{key:2,class:C(e(u).e("text")),style:J({fontSize:`${e(a)}px`})},[M(d.$slots,"default",{percentage:d.percentage},()=>[d.status?(h(),j(e(G),{key:1},{default:S(()=>[(h(),j(Be(e(f))))]),_:1})):(h(),T("span",{key:0},V(e(p)),1))])],6)):D("v-if",!0)],10,["aria-valuenow"]))}});var ys=oe(gs,[["__file","progress.vue"]]);const Ke=ye(ys),Ve=Symbol("uploadContextKey"),hs="ElUpload";class bs extends Error{constructor(o,t,u,r){super(o),this.name="UploadAjaxError",this.status=t,this.method=u,this.url=r}}function Se(s,o,t){let u;return t.response?u=`${t.response.error||t.response}`:t.responseText?u=`${t.responseText}`:u=`fail to ${o.method} ${s} ${t.status}`,new bs(u,t.status,o.method,s)}function ks(s){const o=s.responseText||s.response;if(!o)return o;try{return JSON.parse(o)}catch{return o}}const Cs=s=>{typeof XMLHttpRequest>"u"&&le(hs,"XMLHttpRequest is undefined");const o=new XMLHttpRequest,t=s.action;o.upload&&o.upload.addEventListener("progress",c=>{const i=c;i.percent=c.total>0?c.loaded/c.total*100:0,s.onProgress(i)});const u=new FormData;if(s.data)for(const[c,i]of Object.entries(s.data))Oe(i)&&i.length?u.append(c,...i):u.append(c,i);u.append(s.filename,s.file,s.file.name),o.addEventListener("error",()=>{s.onError(Se(t,s,o))}),o.addEventListener("load",()=>{if(o.status<200||o.status>=300)return s.onError(Se(t,s,o));s.onSuccess(ks(o))}),o.open(s.method,t,!0),s.withCredentials&&"withCredentials"in o&&(o.withCredentials=!0);const r=s.headers||{};if(r instanceof Headers)r.forEach((c,i)=>o.setRequestHeader(i,c));else for(const[c,i]of Object.entries(r))Ae(i)||o.setRequestHeader(c,String(i));return o.send(u),o},Xe=["text","picture","picture-card"];let ws=1;const ve=()=>Date.now()+ws++,Ge=Q({action:{type:String,default:"#"},headers:{type:P(Object)},method:{type:String,default:"post"},data:{type:P([Object,Function,Promise]),default:()=>fe({})},multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:P(Array),default:()=>fe([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:Xe,default:"text"},httpRequest:{type:P(Function),default:Cs},disabled:Boolean,limit:Number}),$s=Q({...Ge,beforeUpload:{type:P(Function),default:q},beforeRemove:{type:P(Function)},onRemove:{type:P(Function),default:q},onChange:{type:P(Function),default:q},onPreview:{type:P(Function),default:q},onSuccess:{type:P(Function),default:q},onProgress:{type:P(Function),default:q},onError:{type:P(Function),default:q},onExceed:{type:P(Function),default:q},crossorigin:{type:P(String)}}),Es=Q({files:{type:P(Array),default:()=>fe([])},disabled:{type:Boolean,default:!1},handlePreview:{type:P(Function),default:q},listType:{type:String,values:Xe,default:"text"},crossorigin:{type:P(String)}}),Ss={remove:s=>!!s},Ls=W({name:"ElUploadList"}),_s=W({...Ls,props:Es,emits:Ss,setup(s,{emit:o}){const t=s,{t:u}=Re(),r=Z("upload"),c=Z("icon"),i=Z("list"),$=ne(),v=A(!1),b=U(()=>[r.b("list"),r.bm("list",t.listType),r.is("disabled",t.disabled)]),w=y=>{o("remove",y)};return(y,F)=>(h(),j(Dt,{tag:"ul",class:C(e(b)),name:e(i).b()},{default:S(()=>[(h(!0),T(Lt,null,_t(y.files,(n,f)=>(h(),T("li",{key:n.uid||n.name,class:C([e(r).be("list","item"),e(r).is(n.status),{focusing:v.value}]),tabindex:"0",onKeydown:Ne(a=>!e($)&&w(n),["delete"]),onFocus:a=>v.value=!0,onBlur:a=>v.value=!1,onClick:a=>v.value=!1},[M(y.$slots,"default",{file:n,index:f},()=>[y.listType==="picture"||n.status!=="uploading"&&y.listType==="picture-card"?(h(),T("img",{key:0,class:C(e(r).be("list","item-thumbnail")),src:n.url,crossorigin:y.crossorigin,alt:""},null,10,["src","crossorigin"])):D("v-if",!0),n.status==="uploading"||y.listType!=="picture-card"?(h(),T("div",{key:1,class:C(e(r).be("list","item-info"))},[k("a",{class:C(e(r).be("list","item-name")),onClick:te(a=>y.handlePreview(n),["prevent"])},[E(e(G),{class:C(e(c).m("document"))},{default:S(()=>[E(e(Pt))]),_:1},8,["class"]),k("span",{class:C(e(r).be("list","item-file-name")),title:n.name},V(n.name),11,["title"])],10,["onClick"]),n.status==="uploading"?(h(),j(e(Ke),{key:0,type:y.listType==="picture-card"?"circle":"line","stroke-width":y.listType==="picture-card"?6:2,percentage:Number(n.percentage),style:J(y.listType==="picture-card"?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):D("v-if",!0)],2)):D("v-if",!0),k("label",{class:C(e(r).be("list","item-status-label"))},[y.listType==="text"?(h(),j(e(G),{key:0,class:C([e(c).m("upload-success"),e(c).m("circle-check")])},{default:S(()=>[E(e(Ie))]),_:1},8,["class"])):["picture-card","picture"].includes(y.listType)?(h(),j(e(G),{key:1,class:C([e(c).m("upload-success"),e(c).m("check")])},{default:S(()=>[E(e(he))]),_:1},8,["class"])):D("v-if",!0)],2),e($)?D("v-if",!0):(h(),j(e(G),{key:2,class:C(e(c).m("close")),onClick:a=>w(n)},{default:S(()=>[E(e(Ue))]),_:2},1032,["class","onClick"])),D(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),D(" This is a bug which needs to be fixed "),D(" TODO: Fix the incorrect navigation interaction "),e($)?D("v-if",!0):(h(),T("i",{key:3,class:C(e(c).m("close-tip"))},V(e(u)("el.upload.deleteTip")),3)),y.listType==="picture-card"?(h(),T("span",{key:4,class:C(e(r).be("list","item-actions"))},[k("span",{class:C(e(r).be("list","item-preview")),onClick:a=>y.handlePreview(n)},[E(e(G),{class:C(e(c).m("zoom-in"))},{default:S(()=>[E(e(qe))]),_:1},8,["class"])],10,["onClick"]),e($)?D("v-if",!0):(h(),T("span",{key:0,class:C(e(r).be("list","item-delete")),onClick:a=>w(n)},[E(e(G),{class:C(e(c).m("delete"))},{default:S(()=>[E(e(ze))]),_:1},8,["class"])],10,["onClick"]))],2)):D("v-if",!0)])],42,["onKeydown","onFocus","onBlur","onClick"]))),128)),M(y.$slots,"append")]),_:3},8,["class","name"]))}});var Le=oe(_s,[["__file","upload-list.vue"]]);const Ps=Q({disabled:{type:Boolean,default:!1}}),Ds={file:s=>Oe(s)},Je="ElUploadDrag",Ts=W({name:Je}),Fs=W({...Ts,props:Ps,emits:Ds,setup(s,{emit:o}){ue(Ve)||le(Je,"usage: <el-upload><el-upload-dragger /></el-upload>");const u=Z("upload"),r=A(!1),c=ne(),i=v=>{if(c.value)return;r.value=!1,v.stopPropagation();const b=Array.from(v.dataTransfer.files);o("file",b)},$=()=>{c.value||(r.value=!0)};return(v,b)=>(h(),T("div",{class:C([e(u).b("dragger"),e(u).is("dragover",r.value)]),onDrop:te(i,["prevent"]),onDragover:te($,["prevent"]),onDragleave:te(w=>r.value=!1,["prevent"])},[M(v.$slots,"default")],42,["onDrop","onDragover","onDragleave"]))}});var Rs=oe(Fs,[["__file","upload-dragger.vue"]]);const Bs=Q({...Ge,beforeUpload:{type:P(Function),default:q},onRemove:{type:P(Function),default:q},onStart:{type:P(Function),default:q},onSuccess:{type:P(Function),default:q},onProgress:{type:P(Function),default:q},onError:{type:P(Function),default:q},onExceed:{type:P(Function),default:q}}),Ms=W({name:"ElUploadContent",inheritAttrs:!1}),Is=W({...Ms,props:Bs,setup(s,{expose:o}){const t=s,u=Z("upload"),r=ne(),c=pe({}),i=pe(),$=a=>{if(a.length===0)return;const{autoUpload:p,limit:m,fileList:B,multiple:d,onStart:_,onExceed:N}=t;if(m&&B.length+a.length>m){N(a,B);return}d||(a=a.slice(0,1));for(const I of a){const O=I;O.uid=ve(),_(O),p&&v(O)}},v=async a=>{if(i.value.value="",!t.beforeUpload)return w(a);let p,m={};try{const d=t.data,_=t.beforeUpload(a);m=$e(t.data)?Ee(t.data):t.data,p=await _,$e(t.data)&&Wt(d,m)&&(m=Ee(t.data))}catch{p=!1}if(p===!1){t.onRemove(a);return}let B=a;p instanceof Blob&&(p instanceof File?B=p:B=new File([p],a.name,{type:a.type})),w(Object.assign(B,{uid:a.uid}),m)},b=async(a,p)=>ge(a)?a(p):a,w=async(a,p)=>{const{headers:m,data:B,method:d,withCredentials:_,name:N,action:I,onProgress:O,onSuccess:H,onError:Y,httpRequest:K}=t;try{p=await b(p??B,a)}catch{t.onRemove(a);return}const{uid:l}=a,g={headers:m||{},withCredentials:_,file:a,data:p,method:d,filename:N,action:I,onProgress:R=>{O(R,a)},onSuccess:R=>{H(R,a),delete c.value[l]},onError:R=>{Y(R,a),delete c.value[l]}},L=K(g);c.value[l]=L,L instanceof Promise&&L.then(g.onSuccess,g.onError)},y=a=>{const p=a.target.files;p&&$(Array.from(p))},F=()=>{r.value||(i.value.value="",i.value.click())},n=()=>{F()};return o({abort:a=>{Tt(c.value).filter(a?([m])=>String(a.uid)===m:()=>!0).forEach(([m,B])=>{B instanceof XMLHttpRequest&&B.abort(),delete c.value[m]})},upload:v}),(a,p)=>(h(),T("div",{class:C([e(u).b(),e(u).m(a.listType),e(u).is("drag",a.drag),e(u).is("disabled",e(r))]),tabindex:e(r)?"-1":"0",onClick:F,onKeydown:Ne(te(n,["self"]),["enter","space"])},[a.drag?(h(),j(Rs,{key:0,disabled:e(r),onFile:$},{default:S(()=>[M(a.$slots,"default")]),_:3},8,["disabled"])):M(a.$slots,"default",{key:1}),k("input",{ref_key:"inputRef",ref:i,class:C(e(u).e("input")),name:a.name,disabled:e(r),multiple:a.multiple,accept:a.accept,type:"file",onChange:y,onClick:te(()=>{},["stop"])},null,42,["name","disabled","multiple","accept","onClick"])],42,["tabindex","onKeydown"]))}});var _e=oe(Is,[["__file","upload-content.vue"]]);const Pe="ElUpload",De=s=>{var o;(o=s.url)!=null&&o.startsWith("blob:")&&URL.revokeObjectURL(s.url)},Us=(s,o)=>{const t=Ft(s,"fileList",void 0,{passive:!0}),u=n=>t.value.find(f=>f.uid===n.uid);function r(n){var f;(f=o.value)==null||f.abort(n)}function c(n=["ready","uploading","success","fail"]){t.value=t.value.filter(f=>!n.includes(f.status))}function i(n){t.value=t.value.filter(f=>f.uid!==n.uid)}const $=(n,f)=>{const a=u(f);a&&(console.error(n),a.status="fail",i(a),s.onError(n,a,t.value),s.onChange(a,t.value))},v=(n,f)=>{const a=u(f);a&&(s.onProgress(n,a,t.value),a.status="uploading",a.percentage=Math.round(n.percent))},b=(n,f)=>{const a=u(f);a&&(a.status="success",a.response=n,s.onSuccess(n,a,t.value),s.onChange(a,t.value))},w=n=>{Ae(n.uid)&&(n.uid=ve());const f={name:n.name,percentage:0,status:"ready",size:n.size,raw:n,uid:n.uid};if(s.listType==="picture-card"||s.listType==="picture")try{f.url=URL.createObjectURL(n)}catch(a){Rt(Pe,a.message),s.onError(a,f,t.value)}t.value=[...t.value,f],s.onChange(f,t.value)},y=async n=>{const f=n instanceof File?u(n):n;f||le(Pe,"file to be removed not found");const a=p=>{r(p),i(p),s.onRemove(p,t.value),De(p)};s.beforeRemove?await s.beforeRemove(f,t.value)!==!1&&a(f):a(f)};function F(){t.value.filter(({status:n})=>n==="ready").forEach(({raw:n})=>{var f;return n&&((f=o.value)==null?void 0:f.upload(n))})}return ee(()=>s.listType,n=>{n!=="picture-card"&&n!=="picture"||(t.value=t.value.map(f=>{const{raw:a,url:p}=f;if(!p&&a)try{f.url=URL.createObjectURL(a)}catch(m){s.onError(m,f,t.value)}return f}))}),ee(t,n=>{for(const f of n)f.uid||(f.uid=ve()),f.status||(f.status="success")},{immediate:!0,deep:!0}),{uploadFiles:t,abort:r,clearFiles:c,handleError:$,handleProgress:v,handleStart:w,handleSuccess:b,handleRemove:y,submit:F,revokeFileObjectURL:De}},Os=W({name:"ElUpload"}),As=W({...Os,props:$s,setup(s,{expose:o}){const t=s,u=ne(),r=pe(),{abort:c,submit:i,clearFiles:$,uploadFiles:v,handleStart:b,handleError:w,handleRemove:y,handleSuccess:F,handleProgress:n,revokeFileObjectURL:f}=Us(t,r),a=U(()=>t.listType==="picture-card"),p=U(()=>({...t,fileList:v.value,onStart:b,onProgress:n,onSuccess:F,onError:w,onRemove:y}));return Fe(()=>{v.value.forEach(f)}),Me(Ve,{accept:Bt(t,"accept")}),o({abort:c,submit:i,clearFiles:$,handleStart:b,handleRemove:y}),(m,B)=>(h(),T("div",null,[e(a)&&m.showFileList?(h(),j(Le,{key:0,disabled:e(u),"list-type":m.listType,files:e(v),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:e(y)},ce({append:S(()=>[E(_e,de({ref_key:"uploadRef",ref:r},e(p)),{default:S(()=>[m.$slots.trigger?M(m.$slots,"trigger",{key:0}):D("v-if",!0),!m.$slots.trigger&&m.$slots.default?M(m.$slots,"default",{key:1}):D("v-if",!0)]),_:3},16)]),_:2},[m.$slots.file?{name:"default",fn:S(({file:d,index:_})=>[M(m.$slots,"file",{file:d,index:_})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):D("v-if",!0),!e(a)||e(a)&&!m.showFileList?(h(),j(_e,de({key:1,ref_key:"uploadRef",ref:r},e(p)),{default:S(()=>[m.$slots.trigger?M(m.$slots,"trigger",{key:0}):D("v-if",!0),!m.$slots.trigger&&m.$slots.default?M(m.$slots,"default",{key:1}):D("v-if",!0)]),_:3},16)):D("v-if",!0),m.$slots.trigger?M(m.$slots,"default",{key:2}):D("v-if",!0),M(m.$slots,"tip"),!e(a)&&m.showFileList?(h(),j(Le,{key:3,disabled:e(u),"list-type":m.listType,files:e(v),crossorigin:m.crossorigin,"handle-preview":m.onPreview,onRemove:e(y)},ce({_:2},[m.$slots.file?{name:"default",fn:S(({file:d,index:_})=>[M(m.$slots,"file",{file:d,index:_})])}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):D("v-if",!0)]))}});var Ns=oe(As,[["__file","upload.vue"]]);const qs=ye(Ns),zs={class:"upload-container"},js={key:1,class:"form-content"},Ws={class:"upload-header"},Hs={class:"upload-progress"},Ys={class:"progress-text"},Ks={class:"hint-text"},Vs={class:"date-picker-section"},Xs={class:"upload-area"},Gs={key:0,class:"upload-trigger"},Js={key:1,class:"upload-complete"},Zs={class:"custom-upload-item"},Qs=["src"],xs={class:"upload-item-overlay"},eo={class:"upload-item-actions"},to={class:"image-date-label"},so={class:"submit-section"},oo={key:2,class:"loading-container"},ao={key:3,class:"results-container"},lo={key:0},no={key:1,class:"empty-results"},ro={class:"preview-container"},io=["src"],uo={__name:"ImageUploadPredictor",props:{timeMode:{type:String,required:!0},imageLimit:{type:Number,required:!0},selectedDate:{type:[Date,String],required:!0},getPredictionResult:{type:Function,required:!0},submitPredictionRequest:{type:Function,required:!0}},emits:["update:selectedDate"],setup(s,{emit:o}){const t=s,u=o,r=A([]),c=A(!1),i=A([]),$=A(""),v=A(!1),b=A([]),w=A(!1),y=A(null),F=A(null),n=A(null),f=A([]);ee(()=>t.selectedDate,l=>{n.value=l,a()}),ee(i,()=>{a()});const a=()=>{if(!n.value)return;const l=[],g=new Date(n.value);for(let L=0;L<t.imageLimit;L++){const R=new Date(g);t.timeMode==="daily"?R.setDate(R.getDate()+L):t.timeMode==="monthly"?R.setMonth(R.getMonth()+L):console.log("Unhandled timeMode:",t.timeMode),l.push(p(R))}f.value=l},p=l=>{const g=l.getFullYear(),L=String(l.getMonth()+1).padStart(2,"0"),R=String(l.getDate()).padStart(2,"0");return`${g}-${L}-${R}`},m=l=>!f.value.length||l>=f.value.length?"未设置日期":f.value[l];ee(i,l=>{l.length===t.imageLimit&&x.success(`已成功选择${t.imageLimit}张图片`)});const B=l=>new Promise((g,L)=>{const R=new FileReader;R.readAsDataURL(l),R.onload=()=>g(R.result),R.onerror=z=>L(z)}),d=l=>l.type==="image/png"?i.value.length>=t.imageLimit?(x.error(`已达到${t.imageLimit}张图片上限`),!1):!0:(x.error("仅支持PNG文件"),!1),_=(l,g)=>{const L=l.image_url;L&&b.value.push(L),x.success(`${g.name} 上传成功`)},N=(l,g)=>{x.error(`${g.name} 上传失败`),console.error("Upload error:",l)},I=async l=>{!l.url&&!l.preview&&(l.preview=await B(l.raw)),$.value=l.url||l.preview,v.value=!0},O=l=>{i.value=i.value.filter(L=>L.uid!==l.uid);const g=i.value.findIndex(L=>L.uid===l.uid);g!==-1&&b.value.splice(g,1),x.warning(`还需上传${t.imageLimit-i.value.length}张图片`)},H=async()=>{if(y.value)try{const l=await t.getPredictionResult(y.value);l.length!=0&&(r.value=l,c.value=!0,clearInterval(F.value),w.value=!1)}catch(l){if(l.response&&l.response.status===400){console.log("Task not completed yet, continuing polling...");return}clearInterval(F.value),w.value=!1,x.error("获取预测结果失败"),console.error("Error:",l)}},Y=async()=>{try{w.value=!0;const l=await t.submitPredictionRequest(t.selectedDate,b.value);y.value=l.task_id,F.value=setInterval(H,2e3)}catch(l){w.value=!1,x.error("提交预测请求失败"),console.error("Error:",l)}},K=()=>{c.value=!1,r.value=[],i.value=[],b.value=[],y.value=null,F.value&&clearInterval(F.value),u("update:selectedDate",null)};return(l,g)=>{const L=G,R=Ht,z=Ke,X=qs,Ze=Yt,Qe=ps;return h(),T("div",zs,[c.value?(h(),j(R,{key:0,class:"back-button",onClick:K},{default:S(()=>[E(L,null,{default:S(()=>[E(e(Ut))]),_:1}),g[2]||(g[2]=It(" 返回 "))]),_:1})):D("",!0),c.value?D("",!0):(h(),T("div",js,[k("div",Ws,[g[4]||(g[4]=k("h3",null,"图片上传",-1)),k("div",Hs,[k("div",Ys,[g[3]||(g[3]=k("span",null,"已上传: ",-1)),k("span",{class:C({complete:i.value.length===t.imageLimit})},V(i.value.length)+"/"+V(t.imageLimit),3)]),E(z,{percentage:i.value.length/t.imageLimit*100,"stroke-width":8,"show-text":!1,status:i.value.length===t.imageLimit?"success":""},null,8,["percentage","status"])]),k("p",Ks,"请上传"+V(t.imageLimit)+"张PNG格式图片",1)]),k("div",Vs,[M(l.$slots,"date-picker",{},void 0,!0),g[5]||(g[5]=k("p",{class:"date-hint"},"选择的日期将作为第一张图片的日期",-1))]),k("div",Xs,[E(X,{"file-list":i.value,"onUpdate:fileList":g[0]||(g[0]=se=>i.value=se),class:"image-uploader",action:"https://seaice.52lxy.one:20443/seaice/png-upload",accept:".png","list-type":"picture-card",multiple:!0,limit:s.imageLimit,"before-upload":d,"on-preview":I,"on-success":_,"on-error":N,"on-remove":O,"auto-upload":!0},{default:S(()=>[i.value.length<t.imageLimit?(h(),T("div",Gs,[E(L,{class:"upload-icon"},{default:S(()=>[E(e(Ot))]),_:1}),g[6]||(g[6]=k("div",{class:"upload-text"},"点击上传",-1)),g[7]||(g[7]=k("div",{class:"upload-hint"},"仅支持PNG格式",-1))])):(h(),T("div",Js,[E(L,{class:"complete-icon"},{default:S(()=>[E(e(he))]),_:1}),g[8]||(g[8]=k("div",{class:"complete-text"},"上传完成",-1))]))]),file:S(({file:se,index:xe})=>[k("div",Zs,[k("img",{class:"upload-thumbnail",src:se.url,alt:""},null,8,Qs),k("div",xs,[k("div",eo,[E(R,{circle:"",type:"primary",onClick:te(et=>I(se),["stop"])},{default:S(()=>[E(L,null,{default:S(()=>[E(e(qe))]),_:1})]),_:2},1032,["onClick"]),E(R,{circle:"",type:"danger",onClick:te(et=>O(se),["stop"])},{default:S(()=>[E(L,null,{default:S(()=>[E(e(ze))]),_:1})]),_:2},1032,["onClick"])])]),k("div",to,[k("span",null,V(m(xe)),1)])])]),_:1},8,["file-list","limit"])]),k("div",so,[E(R,{type:"primary",size:"large",onClick:Y,loading:w.value,disabled:i.value.length!==t.imageLimit||!s.selectedDate||b.value.length!==t.imageLimit,class:"submit-button"},{default:S(()=>[w.value?D("",!0):(h(),j(L,{key:0},{default:S(()=>[E(e(At))]),_:1})),k("span",null,V(w.value?"分析中...":"提交分析"),1)]),_:1},8,["loading","disabled"])])])),w.value?(h(),T("div",oo,[E(Nt),g[9]||(g[9]=k("p",{class:"loading-text"},"正在分析您的图片，请稍候...",-1))])):D("",!0),!w.value&&c.value?(h(),T("div",ao,[r.value.length?(h(),T("div",lo,[E(qt,{images:r.value},null,8,["images"])])):(h(),T("div",no,[E(Ze,{description:"暂无预测结果"}),g[10]||(g[10]=k("p",null,"请上传图片并选择日期以查看预测结果",-1))]))])):D("",!0),E(Qe,{modelValue:v.value,"onUpdate:modelValue":g[1]||(g[1]=se=>v.value=se),title:"图片预览",width:"50%",center:"","destroy-on-close":""},{default:S(()=>[k("div",ro,[k("img",{class:"preview-image",src:$.value,alt:"Preview Image"},null,8,io)])]),_:1},8,["modelValue"])])}}},po=Mt(uo,[["__scopeId","data-v-fd1b4db4"]]);export{po as I};
