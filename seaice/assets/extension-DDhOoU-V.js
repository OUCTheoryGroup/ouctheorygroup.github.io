import{a0 as y,a1 as M,a2 as O,a3 as P,a4 as _,a5 as N,a6 as V,a7 as L,q as p,S as f,p as v,C as g,P as T,a8 as b,m as k,l as w,n as R,k as U,j as $,h as j,f as A,e as B,d as H,c as I,b as Y,a as q,a9 as F,aa as z}from"./index-Bfp48sXw.js";var E=y(),G={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},J=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=Q(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return P(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var i=this.source.dimensionsDefine;if(i)return i[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,i=_(this.source),s=!W(t),r="",a=[],n=0,l=0;n<t;n++){var u=void 0,m=void 0,c=void 0,o=this.dimensions[l];if(o&&o.storeDimIndex===n)u=i?o.name:null,m=o.type,c=o.ordinalMeta,l++;else{var d=this.getSourceDimension(n);d&&(u=i?d.name:null,m=d.type)}a.push({property:u,type:m,ordinalMeta:c}),i&&u!=null&&(!o||!o.isCalculationCoord)&&(r+=s?u.replace(/\`/g,"`1").replace(/\$/g,"`2"):u),r+="$",r+=G[m]||"f",c&&(r+=c.uid),r+="$"}var h=this.source,S=[h.seriesLayoutBy,h.startIndex,r].join("$$");return{dimensions:a,hash:S}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],i=0,s=0;i<this._fullDimCount;i++){var r=void 0,a=this.dimensions[s];if(a&&a.storeDimIndex===i)a.isCalculationCoord||(r=a.name),s++;else{var n=this.getSourceDimension(i);n&&(r=n.name)}t.push(r)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function D(e){return e instanceof J}function K(e){for(var t=M(),i=0;i<(e||[]).length;i++){var s=e[i],r=O(s)?s.name:s;r!=null&&t.get(r)==null&&t.set(r,i)}return t}function Q(e){var t=E(e);return t.dimNameMap||(t.dimNameMap=K(e.dimensionsDefine))}function W(e){return e>30}var C=[],X={registerPreprocessor:q,registerProcessor:Y,registerPostInit:I,registerPostUpdate:H,registerUpdateLifecycle:B,registerAction:A,registerCoordinateSystem:j,registerLayout:$,registerVisual:U,registerTransform:R,registerLoading:w,registerMap:k,registerImpl:b,PRIORITY:T,ComponentModel:g,ComponentView:v,SeriesModel:f,ChartView:p,registerComponentModel:function(e){g.registerClass(e)},registerComponentView:function(e){v.registerClass(e)},registerSeriesModel:function(e){f.registerClass(e)},registerChartView:function(e){p.registerClass(e)},registerSubTypeDefaulter:function(e,t){g.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){F(e,t)}};function Z(e){if(N(e)){V(e,function(t){Z(t)});return}L(C,e)>=0||(C.push(e),z(e)&&(e={install:e}),e.install(X))}export{J as S,K as c,Q as e,D as i,W as s,Z as u};
