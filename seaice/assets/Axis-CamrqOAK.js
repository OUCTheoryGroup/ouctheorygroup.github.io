import{a6 as L,ae as it,b8 as ie,ac as D,a1 as oe,a2 as Dt,b9 as dt,ba as Ot,bb as R,bc as se,bd as ot,a5 as gt,be as ue,bf as Z,ao as Bt,bg as le,bh as ce,bi as Mt,bj as ve,bk as X,bl as fe,bm as A,bn as Tt,bo as At,bp as rt,bq as xt,af as he,br as ft,bs as de,bt as ge,bu as nt,bv as Wt,bw as Pt,bx as Ft,by as Rt,bz as Gt,bA as Vt,bB as _t,bC as pe,bD as me,bE as ye,bF as be,bG as Me,bH as xe,bI as _e,bJ as ke,bK as Ee,aa as $,bL as kt,bM as ht,N as we,bN as Le,a0 as Ne,bO as Se,bP as Et}from"./index-DG9jATsB.js";import{i as Ie}from"./extension-Ba00hQNg.js";function ba(r,e,t){t=t||{};var a=t.byIndex,n=t.stackedCoordDimension,i,o,s;Ce(e)?i=e:(o=e.schema,i=o.dimensions,s=e.store);var u=!!(r&&r.get("stack")),l,c,h,f;if(L(i,function(p,_){it(p)&&(i[_]=p={name:p}),u&&!p.isExtraCoord&&(!a&&!l&&p.ordinalMeta&&(l=p),!c&&p.type!=="ordinal"&&p.type!=="time"&&(!n||n===p.coordDim)&&(c=p))}),c&&!a&&!l&&(a=!0),c){h="__\0ecstackresult_"+r.id,f="__\0ecstackedover_"+r.id,l&&(l.createInvertedIndices=!0);var v=c.coordDim,d=c.type,y=0;L(i,function(p){p.coordDim===v&&y++});var M={name:h,coordDim:v,coordDimIndex:y,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},g={name:f,coordDim:f,coordDimIndex:y+1,type:d,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};o?(s&&(M.storeDimIndex=s.ensureCalculationDimension(f,d),g.storeDimIndex=s.ensureCalculationDimension(h,d)),o.appendCalculationDimension(M),o.appendCalculationDimension(g)):(i.push(M),i.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:l&&l.name,isStackedByIndex:a,stackedOverDimension:f,stackResultDimension:h}}function Ce(r){return!Ie(r.schema)}function zt(r,e){return!!e&&e===r.getCalculationInfo("stackedDimension")}function De(r,e){return zt(r,e)?r.getCalculationInfo("stackResultDimension"):e}var G=function(){function r(e){this._setting=e||{},this._extent=[1/0,-1/0]}return r.prototype.getSetting=function(e){return this._setting[e]},r.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},r.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.setExtent=function(e,t){var a=this._extent;isNaN(e)||(a[0]=e),isNaN(t)||(a[1]=t)},r.prototype.isInExtentRange=function(e){return this._extent[0]<=e&&this._extent[1]>=e},r.prototype.isBlank=function(){return this._isBlank},r.prototype.setBlank=function(e){this._isBlank=e},r}();ie(G);var Oe=0,wt=function(){function r(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this.uid=++Oe}return r.createByAxisModel=function(e){var t=e.option,a=t.data,n=a&&D(a,Be);return new r({categories:n,needCollect:!n,deduplication:t.dedplication!==!1})},r.prototype.getOrdinal=function(e){return this._getOrCreateMap().get(e)},r.prototype.parseAndCollect=function(e){var t,a=this._needCollect;if(!it(e)&&!a)return e;if(a&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var n=this._getOrCreateMap();return t=n.get(e),t==null&&(a?(t=this.categories.length,this.categories[t]=e,n.set(e,t)):t=NaN),t},r.prototype._getOrCreateMap=function(){return this._map||(this._map=oe(this.categories))},r}();function Be(r){return Dt(r)&&r.value!=null?r.value:r+""}function Ma(r){return r.type==="interval"||r.type==="log"}function Te(r,e,t,a){var n={},i=r[1]-r[0],o=n.interval=Ot(i/e);t!=null&&o<t&&(o=n.interval=t),a!=null&&o>a&&(o=n.interval=a);var s=n.intervalPrecision=Ht(o),u=n.niceTickExtent=[R(Math.ceil(r[0]/o)*o,s),R(Math.floor(r[1]/o)*o,s)];return Ae(u,r),n}function xa(r){var e=Math.pow(10,se(r)),t=r/e;return t?t===2?t=3:t===3?t=5:t*=2:t=1,R(t*e)}function Ht(r){return dt(r)+2}function Lt(r,e,t){r[e]=Math.max(Math.min(r[e],t[1]),t[0])}function Ae(r,e){!isFinite(r[0])&&(r[0]=e[0]),!isFinite(r[1])&&(r[1]=e[1]),Lt(r,0,e),Lt(r,1,e),r[0]>r[1]&&(r[0]=r[1])}function st(r,e){return r>=e[0]&&r<=e[1]}function ut(r,e){return e[1]===e[0]?.5:(r-e[0])/(e[1]-e[0])}function lt(r,e){return r*(e[1]-e[0])+e[0]}var pt=function(r){ot(e,r);function e(t){var a=r.call(this,t)||this;a.type="ordinal";var n=a.getSetting("ordinalMeta");return n||(n=new wt({})),gt(n)&&(n=new wt({categories:D(n,function(i){return Dt(i)?i.value:i})})),a._ordinalMeta=n,a._extent=a.getSetting("extent")||[0,n.categories.length-1],a}return e.prototype.parse=function(t){return t==null?NaN:it(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),st(t,this._extent)&&this._ordinalMeta.categories[t]!=null},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),ut(t,this._extent)},e.prototype.scale=function(t){return t=Math.round(lt(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],a=this._extent,n=a[0];n<=a[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(t==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var a=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],o=0,s=this._ordinalMeta.categories.length,u=Math.min(s,a.length);o<u;++o){var l=a[o];n[o]=l,i[l]=o}for(var c=0;o<s;++o){for(;i[c]!=null;)c++;n.push(c),i[c]=o}},e.prototype._getTickNumber=function(t){var a=this._ticksByOrdinalNumber;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getRawOrdinalNumber=function(t){var a=this._ordinalNumbersByTick;return a&&t>=0&&t<a.length?a[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var a=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[a];return n==null?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,a){this.unionExtent(t.getApproximateExtent(a))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(G);G.registerClass(pt);var H=R,U=function(r){ot(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="interval",t._interval=0,t._intervalPrecision=2,t}return e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return st(t,this._extent)},e.prototype.normalize=function(t){return ut(t,this._extent)},e.prototype.scale=function(t){return lt(t,this._extent)},e.prototype.setExtent=function(t,a){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(a)||(n[1]=parseFloat(a))},e.prototype.unionExtent=function(t){var a=this._extent;t[0]<a[0]&&(a[0]=t[0]),t[1]>a[1]&&(a[1]=t[1]),this.setExtent(a[0],a[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=Ht(t)},e.prototype.getTicks=function(t){var a=this._interval,n=this._extent,i=this._niceExtent,o=this._intervalPrecision,s=[];if(!a)return s;var u=1e4;n[0]<i[0]&&(t?s.push({value:H(i[0]-a,o)}):s.push({value:n[0]}));for(var l=i[0];l<=i[1]&&(s.push({value:l}),l=H(l+a,o),l!==s[s.length-1].value);)if(s.length>u)return[];var c=s.length?s[s.length-1].value:i[1];return n[1]>c&&(t?s.push({value:H(c+a,o)}):s.push({value:n[1]})),s},e.prototype.getMinorTicks=function(t){for(var a=this.getTicks(!0),n=[],i=this.getExtent(),o=1;o<a.length;o++){for(var s=a[o],u=a[o-1],l=0,c=[],h=s.value-u.value,f=h/t;l<t-1;){var v=H(u.value+(l+1)*f);v>i[0]&&v<i[1]&&c.push(v),l++}n.push(c)}return n},e.prototype.getLabel=function(t,a){if(t==null)return"";var n=a&&a.precision;n==null?n=dt(t.value)||0:n==="auto"&&(n=this._intervalPrecision);var i=H(t.value,n,!0);return ue(i)},e.prototype.calcNiceTicks=function(t,a,n){t=t||5;var i=this._extent,o=i[1]-i[0];if(isFinite(o)){o<0&&(o=-o,i.reverse());var s=Te(i,t,a,n);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var a=this._extent;if(a[0]===a[1])if(a[0]!==0){var n=Math.abs(a[0]);t.fixMax||(a[1]+=n/2),a[0]-=n/2}else a[1]=1;var i=a[1]-a[0];isFinite(i)||(a[0]=0,a[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var o=this._interval;t.fixMin||(a[0]=H(Math.floor(a[0]/o)*o)),t.fixMax||(a[1]=H(Math.ceil(a[1]/o)*o))},e.prototype.setNiceExtent=function(t,a){this._niceExtent=[t,a]},e.type="interval",e}(G);G.registerClass(U);var qt=typeof Float32Array<"u",We=qt?Float32Array:Array;function vt(r){return gt(r)?qt?new Float32Array(r):r:new We(r)}var Pe="__ec_stack_";function Kt(r){return r.get("stack")||Pe+r.seriesIndex}function mt(r){return r.dim+r.index}function Yt(r,e){var t=[];return e.eachSeriesByType(r,function(a){Xt(a)&&t.push(a)}),t}function Fe(r){var e={};L(r,function(u){var l=u.coordinateSystem,c=l.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var h=u.getData(),f=c.dim+"_"+c.index,v=h.getDimensionIndex(h.mapDimension(c.dim)),d=h.getStore(),y=0,M=d.count();y<M;++y){var g=d.get(v,y);e[f]?e[f].push(g):e[f]=[g]}});var t={};for(var a in e)if(e.hasOwnProperty(a)){var n=e[a];if(n){n.sort(function(u,l){return u-l});for(var i=null,o=1;o<n.length;++o){var s=n[o]-n[o-1];s>0&&(i=i===null?s:Math.min(i,s))}t[a]=i}}return t}function Zt(r){var e=Fe(r),t=[];return L(r,function(a){var n=a.coordinateSystem,i=n.getBaseAxis(),o=i.getExtent(),s;if(i.type==="category")s=i.getBandWidth();else if(i.type==="value"||i.type==="time"){var u=i.dim+"_"+i.index,l=e[u],c=Math.abs(o[1]-o[0]),h=i.scale.getExtent(),f=Math.abs(h[1]-h[0]);s=l?c/f*l:c}else{var v=a.getData();s=Math.abs(o[1]-o[0])/v.count()}var d=Z(a.get("barWidth"),s),y=Z(a.get("barMaxWidth"),s),M=Z(a.get("barMinWidth")||(Jt(a)?.5:1),s),g=a.get("barGap"),p=a.get("barCategoryGap");t.push({bandWidth:s,barWidth:d,barMaxWidth:y,barMinWidth:M,barGap:g,barCategoryGap:p,axisKey:mt(i),stackId:Kt(a)})}),Re(t)}function Re(r){var e={};L(r,function(a,n){var i=a.axisKey,o=a.bandWidth,s=e[i]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},u=s.stacks;e[i]=s;var l=a.stackId;u[l]||s.autoWidthCount++,u[l]=u[l]||{width:0,maxWidth:0};var c=a.barWidth;c&&!u[l].width&&(u[l].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var h=a.barMaxWidth;h&&(u[l].maxWidth=h);var f=a.barMinWidth;f&&(u[l].minWidth=f);var v=a.barGap;v!=null&&(s.gap=v);var d=a.barCategoryGap;d!=null&&(s.categoryGap=d)});var t={};return L(e,function(a,n){t[n]={};var i=a.stacks,o=a.bandWidth,s=a.categoryGap;if(s==null){var u=Bt(i).length;s=Math.max(35-u*4,15)+"%"}var l=Z(s,o),c=Z(a.gap,1),h=a.remainedWidth,f=a.autoWidthCount,v=(h-l)/(f+(f-1)*c);v=Math.max(v,0),L(i,function(g){var p=g.maxWidth,_=g.minWidth;if(g.width){var m=g.width;p&&(m=Math.min(m,p)),_&&(m=Math.max(m,_)),g.width=m,h-=m+c*m,f--}else{var m=v;p&&p<m&&(m=Math.min(p,h)),_&&_>m&&(m=_),m!==v&&(g.width=m,h-=m+c*m,f--)}}),v=(h-l)/(f+(f-1)*c),v=Math.max(v,0);var d=0,y;L(i,function(g,p){g.width||(g.width=v),y=g,d+=g.width*(1+c)}),y&&(d-=y.width*c);var M=-d/2;L(i,function(g,p){t[n][p]=t[n][p]||{bandWidth:o,offset:M,width:g.width},M+=g.width*(1+c)})}),t}function Ge(r,e,t){if(r&&e){var a=r[mt(e)];return a}}function _a(r,e){var t=Yt(r,e),a=Zt(t);L(t,function(n){var i=n.getData(),o=n.coordinateSystem,s=o.getBaseAxis(),u=Kt(n),l=a[mt(s)][u],c=l.offset,h=l.width;i.setLayout({bandWidth:l.bandWidth,offset:c,size:h})})}function ka(r){return{seriesType:r,plan:le(),reset:function(e){if(Xt(e)){var t=e.getData(),a=e.coordinateSystem,n=a.getBaseAxis(),i=a.getOtherAxis(n),o=t.getDimensionIndex(t.mapDimension(i.dim)),s=t.getDimensionIndex(t.mapDimension(n.dim)),u=e.get("showBackground",!0),l=t.mapDimension(i.dim),c=t.getCalculationInfo("stackResultDimension"),h=zt(t,l)&&!!t.getCalculationInfo("stackedOnSeries"),f=i.isHorizontal(),v=Ve(n,i),d=Jt(e),y=e.get("barMinHeight")||0,M=c&&t.getDimensionIndex(c),g=t.getLayout("size"),p=t.getLayout("offset");return{progress:function(_,m){for(var N=_.count,O=d&&vt(N*3),B=d&&u&&vt(N*3),q=d&&vt(N),V=a.master.getRect(),E=f?V.width:V.height,b,W=m.getStore(),I=0;(b=_.next())!=null;){var z=W.get(h?M:o,b),S=W.get(s,b),C=v,P=void 0;h&&(P=+z-W.get(o,b));var x=void 0,k=void 0,w=void 0,F=void 0;if(f){var Y=a.dataToPoint([z,S]);if(h){var ct=a.dataToPoint([P,S]);C=ct[0]}x=C,k=Y[1]+p,w=Y[0]-C,F=g,Math.abs(w)<y&&(w=(w<0?-1:1)*y)}else{var Y=a.dataToPoint([S,z]);if(h){var ct=a.dataToPoint([S,P]);C=ct[1]}x=Y[0]+p,k=C,w=g,F=Y[1]-C,Math.abs(F)<y&&(F=(F<=0?-1:1)*y)}d?(O[I]=x,O[I+1]=k,O[I+2]=f?w:F,B&&(B[I]=f?V.x:x,B[I+1]=f?k:V.y,B[I+2]=E),q[b]=b):m.setItemLayout(b,{x,y:k,width:w,height:F}),I+=3}d&&m.setLayout({largePoints:O,largeDataIndices:q,largeBackgroundPoints:B,valueAxisHorizontal:f})}}}}}}function Xt(r){return r.coordinateSystem&&r.coordinateSystem.type==="cartesian2d"}function Jt(r){return r.pipelineContext&&r.pipelineContext.large}function Ve(r,e){var t=e.model.get("startValue");return t||(t=0),e.toGlobalCoord(e.dataToCoord(e.type==="log"?t>0?t:1:t))}var ze=function(r,e,t,a){for(;t<a;){var n=t+a>>>1;r[n][1]<e?t=n+1:a=n}return t},$t=function(r){ot(e,r);function e(t){var a=r.call(this,t)||this;return a.type="time",a}return e.prototype.getLabel=function(t){var a=this.getSetting("useUTC");return ce(t.value,Mt[ve(X(this._minLevelUnit))]||Mt.second,a,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,a,n){var i=this.getSetting("useUTC"),o=this.getSetting("locale");return fe(t,a,n,o,i)},e.prototype.getTicks=function(){var t=this._interval,a=this._extent,n=[];if(!t)return n;n.push({value:a[0],level:0});var i=this.getSetting("useUTC"),o=Je(this._minLevelUnit,this._approxInterval,i,a);return n=n.concat(o),n.push({value:a[1],level:0}),n},e.prototype.calcNiceExtent=function(t){var a=this._extent;if(a[0]===a[1]&&(a[0]-=A,a[1]+=A),a[1]===-1/0&&a[0]===1/0){var n=new Date;a[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),a[0]=a[1]-A}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,a,n){t=t||10;var i=this._extent,o=i[1]-i[0];this._approxInterval=o/t,a!=null&&this._approxInterval<a&&(this._approxInterval=a),n!=null&&this._approxInterval>n&&(this._approxInterval=n);var s=j.length,u=Math.min(ze(j,this._approxInterval,0,s),s-1);this._interval=j[u][1],this._minLevelUnit=j[Math.max(u-1,0)][0]},e.prototype.parse=function(t){return he(t)?t:+ft(t)},e.prototype.contain=function(t){return st(this.parse(t),this._extent)},e.prototype.normalize=function(t){return ut(this.parse(t),this._extent)},e.prototype.scale=function(t){return lt(t,this._extent)},e.type="time",e}(U),j=[["second",Tt],["minute",At],["hour",rt],["quarter-day",rt*6],["half-day",rt*12],["day",A*1.2],["half-week",A*3.5],["week",A*7],["month",A*31],["quarter",A*95],["half-year",xt/2],["year",xt]];function He(r,e,t,a){var n=ft(e),i=ft(t),o=function(d){return _t(n,d,a)===_t(i,d,a)},s=function(){return o("year")},u=function(){return s()&&o("month")},l=function(){return u()&&o("day")},c=function(){return l()&&o("hour")},h=function(){return c()&&o("minute")},f=function(){return h()&&o("second")},v=function(){return f()&&o("millisecond")};switch(r){case"year":return s();case"month":return u();case"day":return l();case"hour":return c();case"minute":return h();case"second":return f();case"millisecond":return v()}}function qe(r,e){return r/=A,r>16?16:r>7.5?7:r>3.5?4:r>1.5?2:1}function Ke(r){var e=30*A;return r/=e,r>6?6:r>3?3:r>2?2:1}function Ye(r){return r/=rt,r>12?12:r>6?6:r>3.5?4:r>2?2:1}function Nt(r,e){return r/=e?At:Tt,r>30?30:r>20?20:r>15?15:r>10?10:r>5?5:r>2?2:1}function Ze(r){return Ot(r)}function Xe(r,e,t){var a=new Date(r);switch(X(e)){case"year":case"month":a[Vt(t)](0);case"day":a[Gt(t)](1);case"hour":a[Rt(t)](0);case"minute":a[Ft(t)](0);case"second":a[Wt(t)](0),a[Pt(t)](0)}return a.getTime()}function Je(r,e,t,a){var n=1e4,i=de,o=0;function s(E,b,W,I,z,S,C){for(var P=new Date(b),x=b,k=P[I]();x<W&&x<=a[1];)C.push({value:x}),k+=E,P[z](k),x=P.getTime();C.push({value:x,notAdd:!0})}function u(E,b,W){var I=[],z=!b.length;if(!He(X(E),a[0],a[1],t)){z&&(b=[{value:Xe(new Date(a[0]),E,t)},{value:a[1]}]);for(var S=0;S<b.length-1;S++){var C=b[S].value,P=b[S+1].value;if(C!==P){var x=void 0,k=void 0,w=void 0,F=!1;switch(E){case"year":x=Math.max(1,Math.round(e/A/365)),k=_e(t),w=ke(t);break;case"half-year":case"quarter":case"month":x=Ke(e),k=xe(t),w=Vt(t);break;case"week":case"half-week":case"day":x=qe(e),k=Me(t),w=Gt(t),F=!0;break;case"half-day":case"quarter-day":case"hour":x=Ye(e),k=be(t),w=Rt(t);break;case"minute":x=Nt(e,!0),k=ye(t),w=Ft(t);break;case"second":x=Nt(e,!1),k=me(t),w=Wt(t);break;case"millisecond":x=Ze(e),k=pe(t),w=Pt(t);break}s(x,C,P,k,w,F,I),E==="year"&&W.length>1&&S===0&&W.unshift({value:W[0].value-x})}}for(var S=0;S<I.length;S++)W.push(I[S]);return I}}for(var l=[],c=[],h=0,f=0,v=0;v<i.length&&o++<n;++v){var d=X(i[v]);if(ge(i[v])){u(i[v],l[l.length-1]||[],c);var y=i[v+1]?X(i[v+1]):null;if(d!==y){if(c.length){f=h,c.sort(function(E,b){return E.value-b.value});for(var M=[],g=0;g<c.length;++g){var p=c[g].value;(g===0||c[g-1].value!==p)&&(M.push(c[g]),p>=a[0]&&p<=a[1]&&h++)}var _=(a[1]-a[0])/e;if(h>_*1.5&&f>_/1.5||(l.push(M),h>_||r===i[v]))break}c=[]}}}for(var m=nt(D(l,function(E){return nt(E,function(b){return b.value>=a[0]&&b.value<=a[1]&&!b.notAdd})}),function(E){return E.length>0}),N=[],O=m.length-1,v=0;v<m.length;++v)for(var B=m[v],q=0;q<B.length;++q)N.push({value:B[q].value,level:O-v});N.sort(function(E,b){return E.value-b.value});for(var V=[],v=0;v<N.length;++v)(v===0||N[v].value!==N[v-1].value)&&V.push(N[v]);return V}G.registerClass($t);var St=G.prototype,J=U.prototype,$e=R,Qe=Math.floor,Ue=Math.ceil,tt=Math.pow,T=Math.log,yt=function(r){ot(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.type="log",t.base=10,t._originalScale=new U,t._interval=0,t}return e.prototype.getTicks=function(t){var a=this._originalScale,n=this._extent,i=a.getExtent(),o=J.getTicks.call(this,t);return D(o,function(s){var u=s.value,l=R(tt(this.base,u));return l=u===n[0]&&this._fixMin?et(l,i[0]):l,l=u===n[1]&&this._fixMax?et(l,i[1]):l,{value:l}},this)},e.prototype.setExtent=function(t,a){var n=T(this.base);t=T(Math.max(0,t))/n,a=T(Math.max(0,a))/n,J.setExtent.call(this,t,a)},e.prototype.getExtent=function(){var t=this.base,a=St.getExtent.call(this);a[0]=tt(t,a[0]),a[1]=tt(t,a[1]);var n=this._originalScale,i=n.getExtent();return this._fixMin&&(a[0]=et(a[0],i[0])),this._fixMax&&(a[1]=et(a[1],i[1])),a},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var a=this.base;t[0]=T(t[0])/T(a),t[1]=T(t[1])/T(a),St.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,a){this.unionExtent(t.getApproximateExtent(a))},e.prototype.calcNiceTicks=function(t){t=t||10;var a=this._extent,n=a[1]-a[0];if(!(n===1/0||n<=0)){var i=Ee(n),o=t/n*i;for(o<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var s=[R(Ue(a[0]/i)*i),R(Qe(a[1]/i)*i)];this._interval=i,this._niceExtent=s}},e.prototype.calcNiceExtent=function(t){J.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=T(t)/T(this.base),st(t,this._extent)},e.prototype.normalize=function(t){return t=T(t)/T(this.base),ut(t,this._extent)},e.prototype.scale=function(t){return t=lt(t,this._extent),tt(this.base,t)},e.type="log",e}(G),Qt=yt.prototype;Qt.getMinorTicks=J.getMinorTicks;Qt.getLabel=J.getLabel;function et(r,e){return $e(r,dt(e))}G.registerClass(yt);var je=function(){function r(e,t,a){this._prepareParams(e,t,a)}return r.prototype._prepareParams=function(e,t,a){a[1]<a[0]&&(a=[NaN,NaN]),this._dataMin=a[0],this._dataMax=a[1];var n=this._isOrdinal=e.type==="ordinal";this._needCrossZero=e.type==="interval"&&t.getNeedCrossZero&&t.getNeedCrossZero();var i=t.get("min",!0);i==null&&(i=t.get("startValue",!0));var o=this._modelMinRaw=i;$(o)?this._modelMinNum=at(e,o({min:a[0],max:a[1]})):o!=="dataMin"&&(this._modelMinNum=at(e,o));var s=this._modelMaxRaw=t.get("max",!0);if($(s)?this._modelMaxNum=at(e,s({min:a[0],max:a[1]})):s!=="dataMax"&&(this._modelMaxNum=at(e,s)),n)this._axisDataLen=t.getCategories().length;else{var u=t.get("boundaryGap"),l=gt(u)?u:[u||0,u||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[kt(l[0],1),kt(l[1],1)]}},r.prototype.calculate=function(){var e=this._isOrdinal,t=this._dataMin,a=this._dataMax,n=this._axisDataLen,i=this._boundaryGapInner,o=e?null:a-t||Math.abs(t),s=this._modelMinRaw==="dataMin"?t:this._modelMinNum,u=this._modelMaxRaw==="dataMax"?a:this._modelMaxNum,l=s!=null,c=u!=null;s==null&&(s=e?n?0:NaN:t-i[0]*o),u==null&&(u=e?n?n-1:NaN:a+i[1]*o),(s==null||!isFinite(s))&&(s=NaN),(u==null||!isFinite(u))&&(u=NaN);var h=ht(s)||ht(u)||e&&!n;this._needCrossZero&&(s>0&&u>0&&!l&&(s=0),s<0&&u<0&&!c&&(u=0));var f=this._determinedMin,v=this._determinedMax;return f!=null&&(s=f,l=!0),v!=null&&(u=v,c=!0),{min:s,max:u,minFixed:l,maxFixed:c,isBlank:h}},r.prototype.modifyDataMinMax=function(e,t){this[ea[e]]=t},r.prototype.setDeterminedMinMax=function(e,t){var a=ta[e];this[a]=t},r.prototype.freeze=function(){this.frozen=!0},r}(),ta={min:"_determinedMin",max:"_determinedMax"},ea={min:"_dataMin",max:"_dataMax"};function aa(r,e,t){var a=r.rawExtentInfo;return a||(a=new je(r,e,t),r.rawExtentInfo=a,a)}function at(r,e){return e==null?null:ht(e)?NaN:r.parse(e)}function ra(r,e){var t=r.type,a=aa(r,e,r.getExtent()).calculate();r.setBlank(a.isBlank);var n=a.min,i=a.max,o=e.ecModel;if(o&&t==="time"){var s=Yt("bar",o),u=!1;if(L(s,function(h){u=u||h.getBaseAxis()===e.axis}),u){var l=Zt(s),c=na(n,i,e,l);n=c.min,i=c.max}}return{extent:[n,i],fixMin:a.minFixed,fixMax:a.maxFixed}}function na(r,e,t,a){var n=t.axis.getExtent(),i=Math.abs(n[1]-n[0]),o=Ge(a,t.axis);if(o===void 0)return{min:r,max:e};var s=1/0;L(o,function(v){s=Math.min(v.offset,s)});var u=-1/0;L(o,function(v){u=Math.max(v.offset+v.width,u)}),s=Math.abs(s),u=Math.abs(u);var l=s+u,c=e-r,h=1-(s+u)/i,f=c/h-c;return e+=f*(u/l),r-=f*(s/l),{min:r,max:e}}function Ea(r,e){var t=e,a=ra(r,t),n=a.extent,i=t.get("splitNumber");r instanceof yt&&(r.base=t.get("logBase"));var o=r.type,s=t.get("interval"),u=o==="interval"||o==="time";r.setExtent(n[0],n[1]),r.calcNiceExtent({splitNumber:i,fixMin:a.fixMin,fixMax:a.fixMax,minInterval:u?t.get("minInterval"):null,maxInterval:u?t.get("maxInterval"):null}),s!=null&&r.setInterval&&r.setInterval(s)}function wa(r,e){if(e=e||r.get("type"),e)switch(e){case"category":return new pt({ordinalMeta:r.getOrdinalMeta?r.getOrdinalMeta():r.getCategories(),extent:[1/0,-1/0]});case"time":return new $t({locale:r.ecModel.getLocaleModel(),useUTC:r.ecModel.get("useUTC")});default:return new(G.getClass(e)||U)}}function La(r){var e=r.scale.getExtent(),t=e[0],a=e[1];return!(t>0&&a>0||t<0&&a<0)}function K(r){var e=r.getLabelModel().get("formatter"),t=r.type==="category"?r.scale.getExtent()[0]:null;return r.scale.type==="time"?function(a){return function(n,i){return r.scale.getFormattedLabel(n,i,a)}}(e):it(e)?function(a){return function(n){var i=r.scale.getLabel(n),o=a.replace("{value}",i??"");return o}}(e):$(e)?function(a){return function(n,i){return t!=null&&(i=n.value-t),a(ia(r,n),i,n.level!=null?{level:n.level}:null)}}(e):function(a){return r.scale.getLabel(a)}}function ia(r,e){return r.type==="category"?r.scale.getLabel(e):e.value}function Na(r){var e=r.model,t=r.scale;if(!(!e.get(["axisLabel","show"])||t.isBlank())){var a,n,i=t.getExtent();t instanceof pt?n=t.count():(a=t.getTicks(),n=a.length);var o=r.getLabelModel(),s=K(r),u,l=1;n>40&&(l=Math.ceil(n/40));for(var c=0;c<n;c+=l){var h=a?a[c]:{value:i[0]+c},f=s(h,c),v=o.getTextRect(f),d=oa(v,o.get("rotate")||0);u?u.union(d):u=d}return u}}function oa(r,e){var t=e*Math.PI/180,a=r.width,n=r.height,i=a*Math.abs(Math.cos(t))+Math.abs(n*Math.sin(t)),o=a*Math.abs(Math.sin(t))+Math.abs(n*Math.cos(t)),s=new we(r.x,r.y,i,o);return s}function bt(r){var e=r.get("interval");return e??"auto"}function sa(r){return r.type==="category"&&bt(r.getLabelModel())===0}function Sa(r,e){var t={};return L(r.mapDimensionsAll(e),function(a){t[De(r,a)]=!0}),Bt(t)}var Q=Ne();function Ut(r,e){var t=D(e,function(a){return r.scale.parse(a)});return r.type==="time"&&t.length>0&&(t.sort(),t.unshift(t[0]),t.push(t[t.length-1])),t}function ua(r){var e=r.getLabelModel().get("customValues");if(e){var t=K(r),a=r.scale.getExtent(),n=Ut(r,e),i=nt(n,function(o){return o>=a[0]&&o<=a[1]});return{labels:D(i,function(o){var s={value:o};return{formattedLabel:t(s),rawLabel:r.scale.getLabel(s),tickValue:o}})}}return r.type==="category"?ca(r):fa(r)}function la(r,e){var t=r.getTickModel().get("customValues");if(t){var a=r.scale.getExtent(),n=Ut(r,t);return{ticks:nt(n,function(i){return i>=a[0]&&i<=a[1]})}}return r.type==="category"?va(r,e):{ticks:D(r.scale.getTicks(),function(i){return i.value})}}function ca(r){var e=r.getLabelModel(),t=jt(r,e);return!e.get("show")||r.scale.isBlank()?{labels:[],labelCategoryInterval:t.labelCategoryInterval}:t}function jt(r,e){var t=te(r,"labels"),a=bt(e),n=ee(t,a);if(n)return n;var i,o;return $(a)?i=ne(r,a):(o=a==="auto"?ha(r):a,i=re(r,o)),ae(t,a,{labels:i,labelCategoryInterval:o})}function va(r,e){var t=te(r,"ticks"),a=bt(e),n=ee(t,a);if(n)return n;var i,o;if((!e.get("show")||r.scale.isBlank())&&(i=[]),$(a))i=ne(r,a,!0);else if(a==="auto"){var s=jt(r,r.getLabelModel());o=s.labelCategoryInterval,i=D(s.labels,function(u){return u.tickValue})}else o=a,i=re(r,o,!0);return ae(t,a,{ticks:i,tickCategoryInterval:o})}function fa(r){var e=r.scale.getTicks(),t=K(r);return{labels:D(e,function(a,n){return{level:a.level,formattedLabel:t(a,n),rawLabel:r.scale.getLabel(a),tickValue:a.value}})}}function te(r,e){return Q(r)[e]||(Q(r)[e]=[])}function ee(r,e){for(var t=0;t<r.length;t++)if(r[t].key===e)return r[t].value}function ae(r,e,t){return r.push({key:e,value:t}),t}function ha(r){var e=Q(r).autoInterval;return e??(Q(r).autoInterval=r.calculateCategoryInterval())}function da(r){var e=ga(r),t=K(r),a=(e.axisRotate-e.labelRotate)/180*Math.PI,n=r.scale,i=n.getExtent(),o=n.count();if(i[1]-i[0]<1)return 0;var s=1;o>40&&(s=Math.max(1,Math.floor(o/40)));for(var u=i[0],l=r.dataToCoord(u+1)-r.dataToCoord(u),c=Math.abs(l*Math.cos(a)),h=Math.abs(l*Math.sin(a)),f=0,v=0;u<=i[1];u+=s){var d=0,y=0,M=Le(t({value:u}),e.font,"center","top");d=M.width*1.3,y=M.height*1.3,f=Math.max(f,d,7),v=Math.max(v,y,7)}var g=f/c,p=v/h;isNaN(g)&&(g=1/0),isNaN(p)&&(p=1/0);var _=Math.max(0,Math.floor(Math.min(g,p))),m=Q(r.model),N=r.getExtent(),O=m.lastAutoInterval,B=m.lastTickCount;return O!=null&&B!=null&&Math.abs(O-_)<=1&&Math.abs(B-o)<=1&&O>_&&m.axisExtent0===N[0]&&m.axisExtent1===N[1]?_=O:(m.lastTickCount=o,m.lastAutoInterval=_,m.axisExtent0=N[0],m.axisExtent1=N[1]),_}function ga(r){var e=r.getLabelModel();return{axisRotate:r.getRotate?r.getRotate():r.isHorizontal&&!r.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function re(r,e,t){var a=K(r),n=r.scale,i=n.getExtent(),o=r.getLabelModel(),s=[],u=Math.max((e||0)+1,1),l=i[0],c=n.count();l!==0&&u>1&&c/u>2&&(l=Math.round(Math.ceil(l/u)*u));var h=sa(r),f=o.get("showMinLabel")||h,v=o.get("showMaxLabel")||h;f&&l!==i[0]&&y(i[0]);for(var d=l;d<=i[1];d+=u)y(d);v&&d-u!==i[1]&&y(i[1]);function y(M){var g={value:M};s.push(t?M:{formattedLabel:a(g),rawLabel:n.getLabel(g),tickValue:M})}return s}function ne(r,e,t){var a=r.scale,n=K(r),i=[];return L(a.getTicks(),function(o){var s=a.getLabel(o),u=o.value;e(o.value,s)&&i.push(t?u:{formattedLabel:n(o),rawLabel:s,tickValue:u})}),i}var It=[0,1],Ia=function(){function r(e,t,a){this.onBand=!1,this.inverse=!1,this.dim=e,this.scale=t,this._extent=a||[0,0]}return r.prototype.contain=function(e){var t=this._extent,a=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return e>=a&&e<=n},r.prototype.containData=function(e){return this.scale.contain(e)},r.prototype.getExtent=function(){return this._extent.slice()},r.prototype.getPixelPrecision=function(e){return Se(e||this.scale.getExtent(),this._extent)},r.prototype.setExtent=function(e,t){var a=this._extent;a[0]=e,a[1]=t},r.prototype.dataToCoord=function(e,t){var a=this._extent,n=this.scale;return e=n.normalize(e),this.onBand&&n.type==="ordinal"&&(a=a.slice(),Ct(a,n.count())),Et(e,It,a,t)},r.prototype.coordToData=function(e,t){var a=this._extent,n=this.scale;this.onBand&&n.type==="ordinal"&&(a=a.slice(),Ct(a,n.count()));var i=Et(e,a,It,t);return this.scale.scale(i)},r.prototype.pointToData=function(e,t){},r.prototype.getTicksCoords=function(e){e=e||{};var t=e.tickModel||this.getTickModel(),a=la(this,t),n=a.ticks,i=D(n,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),o=t.get("alignWithLabel");return pa(this,i,o,e.clamp),i},r.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var e=this.model.getModel("minorTick"),t=e.get("splitNumber");t>0&&t<100||(t=5);var a=this.scale.getMinorTicks(t),n=D(a,function(i){return D(i,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this)},this);return n},r.prototype.getViewLabels=function(){return ua(this).labels},r.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},r.prototype.getTickModel=function(){return this.model.getModel("axisTick")},r.prototype.getBandWidth=function(){var e=this._extent,t=this.scale.getExtent(),a=t[1]-t[0]+(this.onBand?1:0);a===0&&(a=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/a},r.prototype.calculateCategoryInterval=function(){return da(this)},r}();function Ct(r,e){var t=r[1]-r[0],a=e,n=t/a/2;r[0]+=n,r[1]-=n}function pa(r,e,t,a){var n=e.length;if(!r.onBand||t||!n)return;var i=r.getExtent(),o,s;if(n===1)e[0].coord=i[0],o=e[1]={coord:i[1],tickValue:e[0].tickValue};else{var u=e[n-1].tickValue-e[0].tickValue,l=(e[n-1].coord-e[0].coord)/u;L(e,function(v){v.coord-=l/2});var c=r.scale.getExtent();s=1+c[1]-e[n-1].tickValue,o={coord:e[n-1].coord+l*s,tickValue:c[1]+1},e.push(o)}var h=i[0]>i[1];f(e[0].coord,i[0])&&(a?e[0].coord=i[0]:e.shift()),a&&f(i[0],e[0].coord)&&e.unshift({coord:i[0]}),f(i[1],o.coord)&&(a?o.coord=i[1]:e.pop()),a&&f(o.coord,i[1])&&e.push({coord:i[1]});function f(v,d){return v=R(v),d=R(d),h?v>d:v<d}}export{Ia as A,U as I,wt as O,vt as a,ka as b,wa as c,xa as d,ba as e,Na as f,ra as g,Sa as h,zt as i,Ma as j,La as k,_a as l,ia as m,Ea as n,sa as s};
